import{bz as K,bA as H,p as J,q as G,y as k,bc as Q,aI as X,f as h,b1 as q,a2 as Y,bB as M,O as A,bC as j,x as g,bD as Z,ac as I,T as w,ad as ee,U as L,V as u,aW as te}from"./index-k_q90Oa5.js";var O,z;function ae(){if(z)return O;z=1;var m=Math.max,i=Math.min;function t(e,n,a){return e>=i(n,a)&&e<m(n,a)}return O=t,O}var D,P;function ne(){if(P)return D;P=1;var m=ae(),i=K(),t=H();function e(n,a,r){return a=i(a),r===void 0?(r=a,a=0):r=i(r),n=t(n),m(n,a,r)}return D=e,D}var le=ne();const se=J(le);var ie=function(m){G(i,m);function i(){return m!==null&&m.apply(this,arguments)||this}return i.prototype.doAction=function(t,e,n){var a,r,s=this.props,o=s.resetValue,p=s.onChange,b=s.formStore,f=s.store,l=s.name,c=t==null?void 0:t.actionType;if(c==="clear")p("");else if(c==="reset"){var d=(r=X((a=b==null?void 0:b.pristine)!==null&&a!==void 0?a:f==null?void 0:f.pristine,l))!==null&&r!==void 0?r:o;p(d??"")}},i.prototype.reload=function(){var t=this.props.reloadOptions;t&&t()},i.prototype.handleAddClick=function(){var t=this.props.onAdd;t&&t()},i.prototype.handleEditClick=function(t,e){var n=this.props.onEdit;t.preventDefault(),t.stopPropagation(),n&&n(e)},i.prototype.handleDeleteClick=function(t,e){var n=this.props.onDelete;t.preventDefault(),t.stopPropagation(),n&&n(e)},i.prototype.componentDidMount=function(){this.updateBorderStyle(),window.addEventListener("resize",this.updateBorderStyle)},i.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.updateBorderStyle)},i.prototype.updateBorderStyle=function(){if(this.props.optionType==="button"){var t=this.refs.checkboxRef,e=t.clientWidth,n=Array.from(t.children);n.forEach(function(l){l.style.borderRadius="0",l.style.borderLeftWidth="1px",l.style.borderTopWidth="1px"});var a=n.reduce(function(l,c){return l+c.clientWidth},0);if(a<=e)n.length===1?n[0].style.borderRadius="4px":(n[0].style.borderRadius="4px 0 0 4px",n[n.length-1].style.borderRadius="0 4px 4px 0",n.forEach(function(l,c){c!==0&&(l.style.borderLeftWidth="0")}));else{for(var r=0,s=0,o=Math.floor(a/e),p=[],b=0;b<=o;b++){var f=[];p[b]=f}n.forEach(function(l,c){r+=l.clientWidth,r>e&&(r=l.clientWidth,s++),!(s>o)&&p[s].push(l)}),p.forEach(function(l,c){c===0?(l.forEach(function(d,v){d.style.borderRadius="0",v!==0&&(d.style.borderLeftWidth="0"),l.length>p[c+1].length&&(l[l.length-1].style.borderBottomRightRadius="4px")}),l[0].style.borderTopLeftRadius="4px",l[l.length-1].style.borderTopRightRadius="4px"):c===o?l.forEach(function(d,v){d.style.borderRadius="0",v!==0&&(d.style.borderLeftWidth="0"),d.style.borderTopWidth="0",l[0].style.borderBottomLeftRadius="4px",l[l.length-1].style.borderBottomRightRadius="4px"}):l.forEach(function(d,v){d.style.borderRadius="0",v!==0&&(d.style.borderLeftWidth="0"),d.style.borderTopWidth="0",l.length>p[c+1].length&&(l[l.length-1].style.borderBottomRightRadius="4px")})})}}},i.prototype.renderGroup=function(t,e){var n=this,a,r=this.props,s=r.classnames,o=r.labelField;if(!(!((a=t.children)===null||a===void 0)&&a.length))return null;var p=t.children.map(function(f,l){return n.renderItem(f,l)}),b=this.columnsSplit(p);return h.createElement("div",{key:"group-"+e,className:s("CheckboxesControl-group",t.className)},h.createElement("label",{className:s("CheckboxesControl-groupLabel",t.labelClassName)},t[o||"label"]),b)},i.prototype.renderItem=function(t,e){var n=this;if(t.children)return this.renderGroup(t,e);var a=this.props,r=a.render,s=a.itemClassName,o=a.onToggle,p=a.selectedOptions,b=a.disabled,f=a.inline,l=a.labelClassName,c=a.labelField,d=a.removable,v=a.editable,S=a.translate,W=a.optionType,R=a.menuTpl,x=a.data,N=a.testIdBuilder,T=String(t[c||"label"]),_=t.labelClassName,B=N==null?void 0:N.getChild("item-"+T||e);return h.createElement(q,{className:s,key:e,onChange:function(){return o(t)},checked:!!~p.indexOf(t),disabled:b||t.disabled,inline:f,labelClassName:_||l,description:t.description,optionType:W,testIdBuilder:B},R?r("checkboxes/".concat(e),R,{data:Y(x,t)}):T,d&&M(t,"removable")?h.createElement("a",{"data-tooltip":S("Select.clear"),"data-position":"left"},h.createElement(A,{icon:"minus",className:"icon",onClick:function(C){return n.handleDeleteClick(C,t)}})):null,v&&M(t,"editable")?h.createElement("a",{"data-tooltip":"编辑","data-position":"left"},h.createElement(A,{icon:"pencil",className:"icon",onClick:function(C){return n.handleEditClick(C,t)}})):null)},i.prototype.columnsSplit=function(t){var e=this.props,n=e.columnsCount,a=e.classnames,r=[],s=[];return t.forEach(function(o){o&&o.key&&String(o.key).startsWith("group")?(s.length&&(r.push(j(s,a,n)),s=[]),r.push(o)):s.push(o)}),s.length&&r.push(j(s,a,n)),r},i.prototype.formateThemeCss=function(t){if(!t)return{};var e=t.checkboxesClassName,n=e===void 0?{}:e,a={},r={};return Object.keys(n).forEach(function(s){if(s.includes("checked-")){var o=s.replace("checked-","");r[o]=n[s]}else if(s.includes("checkbox-")){var o=s.replace("checkbox-","");a[o]=n[s]}}),g(g({},t),{checkboxesClassName:a,checkboxesCheckedClassName:r})},i.prototype.render=function(){var t=this,e=this.props,n=e.className;e.style;var a=e.disabled,r=e.placeholder,s=e.options,o=e.inline;e.columnsCount;var p=e.selectedOptions;e.onToggle;var b=e.onToggleAll,f=e.checkAll,l=e.checkAllText,c=e.classnames,d=e.itemClassName,v=e.labelClassName,S=e.creatable,W=e.addApi,R=e.createBtnLabel,x=e.translate,N=e.optionType,T=e.loading,_=e.loadingConfig,B=e.themeCss,C=e.id,U=e.env,E=e.classPrefix,y=[];s&&s.length&&(y=s.map(function(V,$){return t.renderItem(V,$)})),f&&y.length&&N==="default"&&y.unshift(h.createElement(q,{key:"checkall",className:d,onChange:b,checked:!!p.length,partial:se(p.length,0,Z(s).length),disabled:a,inline:o,labelClassName:v},l??x("Checkboxes.selectAll"))),y=this.columnsSplit(y);var F=this.formateThemeCss(B);return h.createElement("div",{className:c("CheckboxesControl",n,I(g(g({},this.props),{name:"checkboxesClassName",id:C,themeCss:F})),I(g(g({},this.props),{name:"checkboxesCheckedClassName",id:C,themeCss:F})),I(g(g({},this.props),{name:"checkboxesLabelClassName",id:C,themeCss:F}))),ref:"checkboxRef"},y&&y.length?y:T?null:h.createElement("span",{className:"Form-placeholder"},x(r)),T?h.createElement(w,{show:!0,icon:"reload",size:"sm",spinnerClassName:c("Checkboxes-spinner"),loadingConfig:_}):null,(S||W)&&!a?h.createElement("a",{className:c("Checkboxes-addBtn"),onClick:this.handleAddClick},h.createElement(A,{icon:"plus",className:"icon"}),x(R)):null,h.createElement(ee,g({},this.props,{config:{themeCss:this.formateThemeCss(B),classNames:[{key:"checkboxesClassName",weights:{default:{suf:" label",inner:"i"},hover:{suf:" label",inner:"i"},disabled:{inner:".".concat(E,"Checkbox--checkbox input[disabled] + i")}}},{key:"checkboxesCheckedClassName",weights:{default:{inner:".".concat(E,"Checkbox--checkbox input:checked + i")},hover:{suf:" .".concat(E,"Checkbox--checkbox"),inner:"input:checked + i"},disabled:{inner:".".concat(E,"Checkbox--checkbox input:checked[disabled] + i")}}},{key:"checkboxesLabelClassName",weights:{default:{suf:" label",inner:"span"},hover:{suf:" label",inner:"span"},disabled:{inner:".".concat(E,"Checkbox--checkbox input[disabled] + i + span")}}}],id:C},env:U})))},i.defaultProps={columnsCount:1,multiple:!0,placeholder:"placeholder.noOption",creatable:!1,inline:!0,createBtnLabel:"Select.createLabel",optionType:"default"},k([L,u("design:type",Function),u("design:paramtypes",[]),u("design:returntype",void 0)],i.prototype,"handleAddClick",null),k([L,u("design:type",Function),u("design:paramtypes",[Event,Object]),u("design:returntype",void 0)],i.prototype,"handleEditClick",null),k([L,u("design:type",Function),u("design:paramtypes",[Event,Object]),u("design:returntype",void 0)],i.prototype,"handleDeleteClick",null),k([L,u("design:type",Function),u("design:paramtypes",[]),u("design:returntype",void 0)],i.prototype,"updateBorderStyle",null),k([te(),u("design:type",Function),u("design:paramtypes",[]),u("design:returntype",void 0)],i.prototype,"render",null),i}(h.Component),oe=function(m){G(i,m);function i(){return m!==null&&m.apply(this,arguments)||this}return i=k([Q({type:"checkboxes",sizeMutable:!1,thin:!0})],i),i}(ie);export{oe as CheckboxesControlRenderer,ie as default};
