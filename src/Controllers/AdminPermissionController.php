<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-06-22 09:38:11              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace DagaSmart\BizAdmin\Controllers; use Illuminate\Support\Facades\Schema; use Illuminate\Support\Str; use DagaSmart\BizAdmin\Admin; use Illuminate\Support\Facades\DB; use DagaSmart\BizAdmin\Renderers\Tag; use DagaSmart\BizAdmin\Services\AdminMenuService; use DagaSmart\BizAdmin\Services\AdminPermissionService; class AdminPermissionController extends AdminController { protected string $serviceName = AdminPermissionService::class; public function list() { goto UkDW6; UkDW6: $UAQoy = ''; goto ko1di; D00T1: $PeHpb = $this->baseCRUD()->perPage(999)->loadDataOnce()->filterTogglable(true)->filter($this->baseFilter()->body([amis()->TextControl("\156\x61\x6d\145", admin_trans("\x61\144\x6d\x69\156\56\141\x64\x6d\151\x6e\x5f\160\x65\x72\x6d\151\163\x73\x69\157\156\56\x6e\x61\x6d\145"))->size("\x6d\x64")->clearable()->placeholder(admin_trans("\x61\x64\x6d\151\x6e\x2e\141\x64\155\151\x6e\137\160\145\162\x6d\x69\163\163\151\x6f\156\x2e\156\141\x6d\145")), amis()->TextControl("\163\154\165\x67", admin_trans("\141\x64\x6d\151\156\x2e\x61\x64\155\x69\156\137\160\x65\x72\155\x69\x73\163\151\157\x6e\x2e\x73\154\x75\x67"))->size("\155\x64")->clearable()->placeholder(admin_trans("\141\x64\x6d\151\156\x2e\141\x64\x6d\151\156\x5f\160\145\x72\x6d\x69\x73\x73\151\157\156\56\x73\154\165\147"))]))->footerToolbar(["\163\164\x61\x74\x69\x73\x74\x69\x63\x73"])->headerToolbar([$this->createButton("\144\162\x61\x77\145\162"), "\x62\x75\154\x6b\x41\x63\x74\151\x6f\156\163", $UAQoy, amis("\x72\x65\x6c\157\x61\x64")->set("\x61\154\x69\147\156", "\x72\151\147\150\164"), amis("\x66\x69\154\x74\x65\x72\55\164\x6f\147\147\x6c\x65\x72")->set("\x61\154\x69\147\156", "\162\x69\147\150\x74")])->autoFillHeight(true)->columns([amis()->TableColumn("\x69\144", "\111\x44")->sortable(), amis()->TableColumn("\156\x61\x6d\x65", admin_trans("\141\x64\155\x69\x6e\x2e\x61\144\155\151\x6e\x5f\160\145\x72\x6d\x69\x73\x73\151\x6f\x6e\x2e\156\141\x6d\x65"))->searchable(), amis()->TableColumn("\163\x6c\165\x67", admin_trans("\x61\144\x6d\151\156\x2e\x61\144\x6d\x69\x6e\x5f\x70\x65\x72\x6d\151\x73\x73\x69\x6f\x6e\56\x73\x6c\165\147")), amis()->TableColumn("\x68\164\x74\160\137\155\145\164\150\157\144", admin_trans("\141\x64\155\151\156\x2e\141\144\155\151\156\137\160\x65\x72\155\x69\x73\163\151\x6f\x6e\56\x68\164\164\160\137\155\x65\164\x68\x6f\144"))->type("\145\141\143\150")->items(Tag::make()->label("\x24\173\151\x74\145\155\x7d")->className("\x6d\171\55\x31"))->placeholder(Tag::make()->label("\101\x4e\131")), amis()->TableColumn("\x68\x74\164\x70\137\x70\141\x74\x68", admin_trans("\x61\x64\155\x69\156\x2e\141\144\155\x69\x6e\x5f\160\x65\162\x6d\x69\163\163\151\x6f\156\x2e\x68\x74\x74\160\137\x70\x61\164\150"))->type("\145\141\x63\150")->items(Tag::make()->label("\x24\x7b\x69\x74\145\x6d\175")->className("\155\x79\55\61")), $this->rowActions([$this->rowEditButton("\x64\x72\x61\167\145\x72"), $this->rowDeleteButton()])]); goto q7Uwu; HfeSu: HT8y0: goto D00T1; uK6H0: $UAQoy = amis()->AjaxAction()->label(admin_trans("\141\144\x6d\151\156\x2e\141\x64\x6d\x69\x6e\137\160\145\162\x6d\x69\163\x73\x69\157\156\x2e\x61\x75\164\x6f\x5f\147\145\156\145\x72\141\164\x65"))->level("\x73\x75\x63\143\x65\x73\x73")->confirmText(admin_trans("\x61\x64\x6d\x69\156\x2e\x61\x64\155\x69\156\137\x70\x65\x72\155\151\x73\x73\151\x6f\156\x2e\141\165\164\x6f\137\x67\x65\x6e\145\162\141\164\x65\137\143\157\156\x66\x69\x72\155"))->api(admin_url("\x73\171\163\164\145\x6d\57\137\x61\x64\x6d\151\156\137\160\x65\x72\155\151\x73\x73\x69\157\156\x73\x5f\141\165\164\157\x5f\147\145\156\145\162\x61\x74\x65")); goto HfeSu; ko1di: if (!Admin::config("\x61\x64\x6d\151\x6e\56\x73\150\x6f\167\137\141\165\x74\157\137\147\145\x6e\145\x72\x61\164\145\137\160\x65\x72\x6d\x69\163\163\x69\157\156\137\x62\165\164\164\x6f\x6e")) { goto HT8y0; } goto uK6H0; q7Uwu: return $this->baseList($PeHpb); goto oSp19; oSp19: } public function form() { return $this->baseForm()->mode("\x6e\x6f\162\155\141\x6c")->body([amis()->TextControl("\156\x61\155\x65", admin_trans("\x61\144\x6d\151\x6e\56\141\144\155\x69\156\x5f\160\x65\162\155\x69\x73\x73\151\157\x6e\56\x6e\x61\155\145"))->required(), amis()->TextControl("\x73\x6c\165\x67", admin_trans("\x61\x64\x6d\x69\156\56\141\144\155\151\156\x5f\x70\x65\162\x6d\151\x73\163\151\157\x6e\x2e\x73\x6c\x75\x67"))->required(), amis()->TreeSelectControl("\x70\141\162\145\x6e\164\x5f\151\x64", admin_trans("\x61\144\x6d\151\156\x2e\160\x61\x72\x65\156\164"))->id("\x70\x61\x72\x65\156\x74\x5f\163\145\154\145\143\x74")->labelField("\x6e\141\155\x65")->valueField("\151\144")->options($this->service->getTree()), amis()->CheckboxesControl("\150\164\x74\160\137\155\x65\x74\x68\157\x64", admin_trans("\141\x64\x6d\151\x6e\56\x61\x64\x6d\151\156\x5f\160\x65\162\x6d\151\x73\x73\151\157\x6e\56\150\x74\x74\160\x5f\155\145\164\150\x6f\x64"))->options($this->getHttpMethods())->description(admin_trans("\141\x64\x6d\x69\x6e\56\141\x64\155\151\x6e\137\160\145\162\x6d\x69\x73\163\151\x6f\x6e\x2e\150\164\x74\160\x5f\155\145\164\x68\157\144\137\144\x65\163\143\x72\151\x70\x74\x69\157\x6e"))->joinValues(false)->extractValue(), amis()->NumberControl("\143\x75\163\164\157\155\x5f\157\162\144\145\x72", admin_trans("\x61\144\155\151\156\56\157\162\x64\x65\162"))->required()->labelRemark(admin_trans("\141\x64\155\x69\x6e\x2e\x6f\x72\144\145\162\137\141\163\143"))->displayMode("\x65\156\x68\141\x6e\x63\x65")->min(0)->value(0), amis()->ArrayControl("\150\x74\164\x70\x5f\160\x61\x74\150", admin_trans("\141\x64\x6d\x69\156\56\141\144\x6d\x69\156\137\160\x65\x72\x6d\x69\163\163\151\x6f\156\56\x68\x74\164\x70\137\x70\x61\x74\150"))->items(amis()->TextControl()->options($this->getRoutes())->required()), amis()->TreeSelectControl("\x6d\145\x6e\165\x73", admin_trans("\141\144\x6d\x69\156\x2e\x6d\x65\156\165\163"))->searchable()->multiple()->showIcon(false)->options(AdminMenuService::make()->getTree())->labelField("\164\151\164\x6c\x65")->valueField("\x69\x64")->autoCheckChildren(false)->joinValues(false)->extractValue()])->onEvent(["\x69\156\x69\x74\x65\x64" => ["\141\x63\164\151\157\156\x73" => [["\x61\x63\x74\x69\x6f\x6e\124\x79\x70\145" => "\163\x65\x74\x56\x61\154\x75\x65", "\x63\157\155\160\157\x6e\145\156\x74\111\x64" => "\160\x61\x72\x65\156\x74\x5f\163\145\154\145\143\x74", "\141\x72\x67\163" => ["\x76\141\x6c\165\x65" => "\x24\x7b\x72\145\x73\x70\157\156\x73\x65\104\141\164\x61\56\160\141\162\x65\x6e\164\137\151\x64\x20\x7c\x7c\40\42\x22\175"]]]]]); } public function detail() { return $this->baseDetail()->body([]); } private function getHttpMethods() : array { return collect(Admin::adminPermissionModel()::$httpMethods)->map(fn($JNTeQ) => ["\166\141\154\165\145" => $JNTeQ, "\154\x61\142\x65\x6c" => $JNTeQ])->toArray(); } public function getRoutes() : array { goto LBOlM; xgaAA: $ia9gD = collect(); goto JcBGT; LBOlM: $LWUUl = (string) Admin::config("\x61\x64\155\x69\x6e\x2e\162\x6f\x75\x74\x65\x2e\x70\x72\x65\x66\151\x78"); goto xgaAA; JcBGT: return collect(app("\162\x6f\x75\x74\x65\x72")->getRoutes())->map(function ($EMwoI) use($LWUUl, $ia9gD) { goto Iii80; jaYVL: if (Str::contains($gzTPE, "\x7b")) { goto E7KQi; } goto qAmX8; hYq1I: vQRcn: goto jaYVL; WGjSB: return $ZkOaA; goto VKnWu; T5Kwc: $LWUUl !== "\57" && ($ZkOaA = Str::replaceFirst($LWUUl, '', $ZkOaA)); goto WGjSB; Iii80: if (!(!Str::startsWith($gzTPE = $EMwoI->uri(), $LWUUl) && $LWUUl && $LWUUl !== "\57")) { goto vQRcn; } goto yO4Np; fETE5: $ZkOaA = preg_replace("\x2f\x7b\56\x2a\x7d\x2b\57", "\52", $gzTPE); goto T5Kwc; oeDSR: VS1d6: goto MhZzz; JQ8r7: $EMwoI !== "\x2a" && $ia9gD->push($EMwoI); goto GmEEF; Iw07q: $EMwoI = $gzTPE . "\52"; goto cY2pK; yO4Np: return null; goto hYq1I; qAmX8: if ($LWUUl !== "\x2f") { goto VS1d6; } goto Iw07q; cY2pK: goto gwnMc; goto oeDSR; MhZzz: $EMwoI = Str::replaceFirst($LWUUl, '', $gzTPE . "\52"); goto QLNoj; QLNoj: gwnMc: goto JQ8r7; GmEEF: E7KQi: goto fETE5; VKnWu: })->merge($ia9gD)->filter()->unique()->map(function ($JNTeQ) { return ["\166\141\154\165\145" => $JNTeQ, "\154\141\142\145\154" => $JNTeQ]; })->values()->all(); goto v_8ow; v_8ow: } public function autoGenerate() { goto rAIDA; iluRl: $SD4gK = $sEtFl->query()->when(!is_null($C38kp), function ($uzIV4) use(&$IuteS, &$C38kp) { goto Y9Vy0; Igh27: $uzIV4->where("\x6d\145\162\x5f\151\x64", $C38kp); goto QWmjp; QWmjp: hTRGi: goto HlK0o; Y9Vy0: if (!Schema::hasColumn($IuteS, "\x6d\145\162\137\x69\x64")) { goto hTRGi; } goto Igh27; HlK0o: })->get(["\x69\144", "\163\x6c\165\x67"])->keyBy("\151\x64")->toArray(); goto G2eiO; jMkNX: $me9vk = $YEvwb->getTable(); goto GhERR; jrjaJ: $C38kp = Admin::merId(); goto D_Xkg; Eg7Vc: $PMHOP = []; goto aR5dS; PZC8W: q3O8G: goto bnPvg; D_Xkg: $wULA6 = $YEvwb->query()->when(!is_null($C38kp), function ($uzIV4) use(&$me9vk, &$C38kp) { goto AdCzB; qc0tz: $uzIV4->where("\155\x65\162\137\151\144", $C38kp); goto p7O0P; AdCzB: if (!Schema::hasColumn($me9vk, "\155\x65\x72\x5f\x69\144")) { goto RN_KM; } goto qc0tz; p7O0P: RN_KM: goto MY1e_; MY1e_: })->get()->toArray(); goto iluRl; rAIDA: $KRm2L = Admin::adminMenuModel(); goto pDcXS; bnPvg: DB::transaction(function () use($C38kp, $PMHOP, &$YEvwb, &$sEtFl, &$IuteS) { goto hPgEk; Vvzbf: K55rw: goto R3lTW; hPgEk: $sEtFl->query()->where("\x69\163\137\x63\x75\x73\x74\157\155\151\172\x65", 0)->when(!is_null($C38kp), function ($uzIV4) use(&$C38kp, &$IuteS) { goto M2RVl; xN61Z: $uzIV4->where("\155\145\x72\137\x69\x64", $C38kp); goto UVM05; M2RVl: if (!Schema::hasColumn($IuteS, "\155\x65\162\137\151\144")) { goto n2jom; } goto xN61Z; UVM05: n2jom: goto GxBgO; GxBgO: })->forceDelete(); goto eXxPk; O6DaJ: $oH7_J->where("\x69\163\x5f\143\x75\x73\x74\157\155\x69\172\145", 0)->when(!is_null($C38kp), function ($uzIV4) use(&$C38kp, &$Zyo2I) { goto vqmiN; Py0Sv: $uzIV4->where("\155\145\x72\137\151\x64", $C38kp); goto WkZ80; WkZ80: t7bUd: goto Rz9ID; vqmiN: if (!Schema::hasColumn($Zyo2I, "\155\145\x72\137\151\x64")) { goto t7bUd; } goto Py0Sv; Rz9ID: })->delete(); goto U1FEX; U1FEX: foreach ($PMHOP as $dr0sI) { goto bz9l3; cGdEa: VdUdk: goto Wsk0q; bz9l3: $J6yf0 = []; goto aoWVI; aoWVI: $J6yf0["\160\x65\162\x6d\151\163\x73\x69\x6f\156\x5f\x69\144"] = $dr0sI["\151\x64"]; goto TON6X; rUHMI: $J6yf0["\x70\x65\162\x6d\151\x73\x73\151\x6f\156\x5f\151\144"] = $O466a; goto BT6Xo; YzG8p: wUEyJ: goto rjZeP; uXToF: $oH7_J->clone()->insert($J6yf0); goto Tn30x; BT6Xo: $J6yf0["\x6d\145\156\165\x5f\151\144"] = $dr0sI["\160\141\x72\x65\x6e\164\x5f\x69\x64"]; goto x1oZX; TON6X: $J6yf0["\x6d\x65\x6e\165\137\151\144"] = $dr0sI["\151\144"]; goto MuicB; zfb_s: $O466a = $dr0sI["\151\x64"]; goto FYbyu; EJdbq: if (!(data_get($dr0sI, "\x70\x61\162\145\156\x74\x5f\151\144", 0) != 0)) { goto VdUdk; } goto COMRl; rjZeP: $oH7_J->insert($J6yf0); goto zfb_s; MuicB: if (!(isset($dr0sI["\155\145\162\x5f\151\144"]) && $Zyo2I && Schema::hasColumn($Zyo2I, "\x6d\145\x72\x5f\151\x64"))) { goto wUEyJ; } goto mQpuX; x1oZX: if (!(isset($dr0sI["\155\x65\x72\137\151\x64"]) && $Zyo2I && Schema::hasColumn($Zyo2I, "\x6d\145\x72\137\151\x64"))) { goto OIe4l; } goto wFjp8; COMRl: $J6yf0 = []; goto rUHMI; Nd6Tj: goto o6m8E; goto cGdEa; HKkxU: OIe4l: goto uXToF; Wsk0q: fG0zV: goto bfR2v; wFjp8: $J6yf0["\155\145\x72\x5f\x69\x64"] = $dr0sI["\x6d\145\162\x5f\x69\144"]; goto HKkxU; Tn30x: $dr0sI = $YEvwb->query()->find($dr0sI["\160\x61\162\145\156\164\x5f\151\x64"]); goto Nd6Tj; FYbyu: o6m8E: goto EJdbq; mQpuX: $J6yf0["\155\x65\x72\137\x69\x64"] = $dr0sI["\x6d\x65\x72\137\x69\x64"]; goto YzG8p; bfR2v: } goto Vvzbf; Rdq6B: $oH7_J = DB::table($Zyo2I); goto O6DaJ; nEc6W: $Zyo2I = $sEtFl->menus()->getTable() ?? null; goto Rdq6B; eXxPk: $sEtFl->query()->insert($PMHOP); goto nEc6W; R3lTW: }); goto DjOHM; G2eiO: $YgQRB = []; goto Eg7Vc; ZEltf: $IuteS = $sEtFl->getTable(); goto jrjaJ; ePys8: $sEtFl = new $qFkD1(); goto ZEltf; pDcXS: $YEvwb = new $KRm2L(); goto jMkNX; aR5dS: foreach ($wULA6 as $RpIak => $PNqcC) { goto CDCSg; aSy9N: if (!in_array($MLbuY, data_get($PMHOP, "\52\x2e\x6e\141\155\x65", []))) { goto Cdjqn; } goto BJ4Z_; nlBph: $PMHOP[$RpIak]["\x73\x6c\165\147"] = data_get($SD4gK, $PNqcC["\151\x64"] . "\x2e\x73\x6c\165\147") ?: $Xn12S; goto SSrAj; gb3uY: $YgQRB[] = $Xn12S; goto iMzkd; BJ4Z_: $MLbuY = sprintf("\45\x73\x28\45\163\51", $MLbuY, $PNqcC["\151\x64"]); goto yQZug; tMD24: $PMHOP[$RpIak]["\155\x65\x72\137\x69\x64"] = $PNqcC["\x6d\145\162\x5f\x69\x64"]; goto CYocj; CYocj: V15mb: goto uF2Bo; SSrAj: $PMHOP[$RpIak]["\150\164\164\x70\x5f\160\x61\164\x68"] = json_encode($dg3lg ? [$dg3lg] : ''); goto o7x5z; Zpsuh: $PMHOP[$RpIak]["\x63\162\145\141\x74\x65\x64\137\x61\164"] = $PNqcC["\143\162\x65\x61\164\145\x64\137\141\x74"]; goto hAdhT; zhYxR: if (!in_array($Xn12S, $YgQRB)) { goto d9SHa; } goto wChZ6; hAdhT: $PMHOP[$RpIak]["\x75\x70\144\x61\164\x65\x64\x5f\141\x74"] = $PNqcC["\x75\160\144\x61\x74\145\144\137\x61\164"]; goto DFILi; CDCSg: $dg3lg = $PNqcC["\165\162\x6c\x5f\164\x79\x70\145"] == $YEvwb::TYPE_ROUTE ? $this->getHttpPath($PNqcC["\x75\162\154"]) : ''; goto AIkx1; AP0uA: if ($dg3lg) { goto zDg1z; } goto GUtO8; RKv6R: $PMHOP[$RpIak]["\x70\141\x72\145\x6e\x74\137\x69\x64"] = $PNqcC["\x70\141\x72\145\156\164\x5f\x69\x64"]; goto Zpsuh; iVp6v: zDg1z: goto alGOF; FpbmT: $PMHOP[$RpIak]["\156\141\155\x65"] = $MLbuY; goto nlBph; DBqYw: ArLTp: goto zhYxR; cuzjo: goto ArLTp; goto iVp6v; alGOF: $Xn12S = Str::of(explode("\x3f", $dg3lg)[0])->trim("\x2f")->replace("\57", "\56")->replace("\52", '')->value(); goto DBqYw; o7x5z: $PMHOP[$RpIak]["\x63\165\x73\164\157\155\137\x6f\x72\x64\145\162"] = $PNqcC["\143\165\163\x74\x6f\155\137\157\x72\144\145\x72"]; goto RKv6R; wChZ6: $Xn12S = $Xn12S . "\x2e" . $PNqcC["\x69\x64"]; goto k90ng; AIkx1: $MLbuY = $PNqcC["\x74\151\164\154\145"]; goto aSy9N; DFILi: if (!(isset($PNqcC["\x6d\x65\x72\x5f\x69\144"]) && $IuteS && Schema::hasColumn($IuteS, "\x6d\x65\162\x5f\x69\144"))) { goto V15mb; } goto tMD24; iMzkd: $PMHOP[$RpIak]["\x69\144"] = $PNqcC["\x69\144"]; goto FpbmT; uF2Bo: vNmpj: goto x2rsi; k90ng: d9SHa: goto gb3uY; yQZug: Cdjqn: goto AP0uA; GUtO8: $Xn12S = Str::uuid(); goto cuzjo; x2rsi: } goto PZC8W; DjOHM: return $this->response()->successMessage(admin_trans("\141\x64\155\x69\x6e\56\163\x75\x63\x63\x65\x73\x73\x66\x75\154\x6c\171\137\x6d\145\163\163\x61\147\145", ["\141\164\x74\x72\x69\142\165\164\x65" => admin_trans("\141\x64\155\x69\x6e\x2e\141\x64\x6d\x69\x6e\x5f\160\145\x72\x6d\x69\x73\x73\x69\x6f\x6e\x2e\x61\165\164\x6f\137\x67\x65\x6e\145\162\x61\x74\145")])); goto xECJX; GhERR: $qFkD1 = Admin::adminPermissionModel(); goto ePys8; xECJX: } private function getHttpPath($gzTPE) { goto LL2HW; Vbjkh: $gzTPE = "\57" . $gzTPE; goto Uuuaf; OAdGi: if (!in_array($gzTPE, $V5AWV)) { goto LSBn_; } goto AwTuh; qiCYA: LSBn_: goto v2WlG; v2WlG: if (str_starts_with($gzTPE, "\x2f")) { goto GpdRl; } goto Vbjkh; Uuuaf: GpdRl: goto xOmhE; AwTuh: return ''; goto qiCYA; LL2HW: $V5AWV = ["\57", '', "\x2d"]; goto OAdGi; xOmhE: return $gzTPE . "\52"; goto ggbXo; ggbXo: } }
