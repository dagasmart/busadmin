<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-06-22 09:38:11              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace DagaSmart\BizAdmin\Controllers\DevTools; use DagaSmart\BizAdmin\Admin; use Illuminate\Support\Str; use DagaSmart\BizAdmin\Support\Cores\Api; use DagaSmart\BizAdmin\Services\AdminApiService; use DagaSmart\BizAdmin\Support\Apis\AdminBaseApi; use DagaSmart\BizAdmin\Controllers\AdminController; class ApiController extends AdminController { protected string $serviceName = AdminApiService::class; public function list() { $PeHpb = $this->baseCRUD()->filter($this->baseFilter()->body([amis()->TextControl("\164\151\164\x6c\145", admin_trans("\141\144\x6d\151\x6e\56\141\160\151\x73\56\164\151\164\x6c\145"))->size("\155\144")->clearable()->placeholder(admin_trans("\141\x64\155\x69\x6e\56\141\x70\151\163\x2e\164\x69\164\154\x65")), amis()->TextControl("\160\x61\164\x68", admin_trans("\x61\x64\x6d\x69\156\x2e\x61\160\151\163\x2e\160\x61\x74\150"))->size("\x6d\144")->clearable()->placeholder(admin_trans("\141\144\x6d\151\x6e\56\141\x70\151\x73\56\160\141\164\150"))]))->headerToolbar([$this->createButton(true, "\154\x67"), ...$this->baseHeaderToolBar(), $this->appTemplateBtn()])->columns([amis()->TableColumn("\x69\x64", "\x49\x44")->sortable(), amis()->TableColumn("\x74\x69\x74\154\145", admin_trans("\141\144\x6d\151\x6e\56\x61\x70\x69\x73\x2e\164\x69\x74\154\145")), amis()->TableColumn("\160\141\x74\150", admin_trans("\141\144\155\x69\x6e\x2e\141\x70\151\x73\56\160\141\x74\150")), amis()->TableColumn("\x74\x65\155\x70\154\x61\164\x65\137\164\151\164\x6c\145", admin_trans("\141\144\x6d\151\156\x2e\x61\160\x69\x73\x2e\x74\145\x6d\x70\x6c\x61\164\x65")), amis()->TableColumn("\145\156\x61\142\154\145\x64", admin_trans("\141\144\155\x69\x6e\56\141\160\151\x73\x2e\145\x6e\x61\142\x6c\x65\x64"))->quickEdit(amis()->SwitchControl()->mode("\151\156\154\151\156\x65")->saveImmediately(true)), amis()->TableColumn("\165\x70\144\141\164\145\144\x5f\x61\164", admin_trans("\x61\x64\155\151\x6e\56\x75\x70\144\141\x74\145\144\x5f\x61\x74"))->type("\144\x61\164\145\x74\151\x6d\145")->sortable(true), $this->rowActions([$this->rowEditButton(true, "\x6c\147"), $this->rowDeleteButton(), $this->previewAction()])]); return $this->baseList($PeHpb); } public function previewAction() { return amis()->DialogAction()->label(admin_trans("\x61\144\x6d\x69\x6e\x2e\160\162\145\166\x69\145\x77"))->size("\x6d\x64")->level("\154\x69\156\153")->visibleOn("\44\173\x6d\x65\x74\x68\157\x64\40\75\75\x20\42\147\145\x74\x22\x20\46\x26\x20\145\156\141\x62\x6c\x65\144\175")->dialog(amis()->Dialog()->title(admin_trans("\141\144\x6d\151\156\56\x70\x72\145\x76\x69\x65\167"))->actions([])->closeOnOutside()->closeOnEsc()->body([amis()->Service()->api("\x2f\44\173\x70\x61\164\150\175")->body([amis()->Json()->source("\44\173\46\x7d")->levelExpand(3)])])); } public function appTemplateBtn() { return amis()->DialogAction()->label(admin_trans("\141\144\x6d\x69\156\x2e\141\160\x69\163\56\141\144\x64\137\x74\x65\155\160\x6c\141\164\x65"))->level("\163\x75\x63\x63\x65\163\163")->icon("\146\141\x20\x66\141\55\x75\x70\154\x6f\141\144")->dialog(amis()->Dialog()->title(admin_trans("\x61\x64\155\x69\156\56\141\x70\x69\x73\56\x61\144\144\137\x74\145\155\x70\x6c\141\x74\145"))->body([amis()->Form()->mode("\156\157\x72\155\141\x6c")->api("\57\x64\145\x76\x5f\x74\157\157\154\x73\x2f\x61\160\151\x2f\x61\144\144\x5f\x74\145\x6d\x70\x6c\141\164\x65")->body([amis()->TextareaControl("\164\x65\x6d\x70\154\141\164\145")->required()->minRows(10)->description(admin_trans("\x61\x64\155\151\156\x2e\141\160\151\x73\x2e\x61\x64\144\137\164\x65\x6d\x70\x6c\x61\x74\145\x5f\x74\x69\160\163"))->placeholder(admin_trans("\141\144\155\151\x6e\56\141\160\x69\163\x2e\x70\141\163\164\x65\x5f\x74\x65\x6d\x70\x6c\141\x74\x65")), amis()->SwitchControl("\x6f\x76\145\x72\x6c\141\x79", admin_trans("\141\x64\155\151\x6e\x2e\x61\x70\151\x73\x2e\157\x76\145\x72\154\x61\171"))->value(1)])])); } public function addTemplate() { goto vKLla; vKLla: $uv5F8 = request("\164\x65\x6d\x70\x6c\x61\x74\x65"); goto Pxkbp; Pxkbp: $ubt9v = Str::between($uv5F8, "\143\x6c\141\163\x73\x20", "\x20\145\x78\164\145\x6e\x64\x73\40\x41\x64\155\x69\156\x42\x61\163\145\x41\160\151"); goto VuCu8; VuCu8: if ($ubt9v) { goto EwnDY; } goto MaWYL; awr1O: try { goto JqCw2; cyglX: app("\146\x69\154\x65\163")->put($o0zdn, $uv5F8); goto Ubkyc; zCMbk: app("\146\151\154\145\x73")->makeDirectory($kAyjt, 0755, true); goto sHjeV; OtcL5: if (is_dir($kAyjt)) { goto kIhwu; } goto zCMbk; sHjeV: kIhwu: goto cyglX; JqCw2: $kAyjt = dirname($o0zdn); goto OtcL5; Ubkyc: } catch (\Throwable $FXDMR) { return $this->response()->fail(admin_trans("\x61\144\155\x69\156\x2e\x73\141\x76\x65\x5f\146\141\151\154\145\144")); } goto bsIGo; zrYe2: admin_abort_if(!$ubt9v, admin_trans("\x61\144\x6d\151\156\x2e\x61\160\151\x73\x2e\x74\145\155\160\154\141\164\x65\137\x66\x6f\x72\155\x61\x74\x5f\145\162\162\x6f\162")); goto pGUdn; vmIGH: EwnDY: goto zrYe2; bsIGo: return $this->response()->successMessage(admin_trans("\x61\x64\155\x69\x6e\x2e\x73\141\x76\145\137\163\x75\x63\x63\x65\163\x73")); goto CCSqr; PZROh: admin_abort_if(is_file($o0zdn) && !request("\x6f\166\x65\162\154\141\171"), admin_trans("\141\x64\x6d\x69\x6e\x2e\x61\160\x69\163\56\164\x65\x6d\160\154\x61\164\x65\137\x65\170\x69\x73\x74\x73")); goto awr1O; MaWYL: $ubt9v = Str::between($uv5F8, "\143\x6c\x61\163\163\x20", "\x20\x65\170\164\x65\156\144\x73\40\134\x44\141\147\141\123\x6d\x61\x72\164\x5c\102\151\x7a\x41\x64\155\151\x6e\134\123\165\x70\160\x6f\162\x74\x5c\101\160\x69\x73\x5c\x41\144\155\151\x6e\102\141\x73\145\101\x70\151"); goto vmIGH; pGUdn: $o0zdn = Api::path($ubt9v . "\x2e\x70\x68\160"); goto PZROh; CCSqr: } public function form() { return $this->baseForm()->body([amis()->TextControl("\x74\151\164\154\x65", admin_trans("\x61\144\x6d\x69\x6e\56\x61\160\x69\163\56\x74\151\x74\154\145"))->required(), amis()->TextControl("\x70\141\164\x68", admin_trans("\x61\x64\x6d\151\x6e\56\141\x70\x69\x73\x2e\x70\x61\x74\150"))->required(), amis()->SwitchControl("\x65\156\141\142\x6c\x65\x64", admin_trans("\x61\x64\155\151\x6e\56\141\160\x69\163\x2e\145\156\x61\x62\x6c\145\x64"))->value(1), amis()->SelectControl("\x74\x65\x6d\x70\x6c\x61\x74\145", admin_trans("\141\144\155\151\156\x2e\141\160\x69\163\x2e\x74\x65\155\x70\154\141\164\145"))->required()->searchable()->source("\57\144\x65\x76\x5f\x74\x6f\x6f\154\x73\57\141\160\151\x2f\x74\145\155\x70\154\141\164\145\x73"), amis()->ComboControl("\x61\162\x67\x73", admin_trans("\141\144\155\x69\156\x2e\x61\x70\151\163\56\x61\162\147\163"))->visibleOn("\44\x7b\x74\x65\155\160\154\x61\x74\x65\x7d")->multiLine()->strictMode(false)->items([amis()->Service()->initFetch()->schemaApi("\147\145\164\72\x2f\144\145\166\x5f\164\157\x6f\x6c\163\x2f\141\160\151\57\141\x72\x67\163\137\163\143\150\x65\155\141\77\x74\145\155\x70\154\141\x74\x65\x3d\x24\173\x74\x65\155\160\x6c\x61\164\145\175")])]); } public function detail($H0Ru3) { return $this->baseDetail()->body([]); } public function template() { $CkoWg = collect(Admin::context()->apis)->filter(fn($dr0sI) => (new \ReflectionClass($dr0sI))->isSubclassOf(AdminBaseApi::class))->map(fn($dr0sI) => ["\x6c\141\142\x65\x6c" => app($dr0sI)->getMethod() . "\x20\x2d\x20" . app($dr0sI)->getTitle(), "\x76\141\x6c\165\145" => $dr0sI]); return $this->response()->success($CkoWg); } public function argsSchema() { goto XyRSC; IoLa1: $NX2Ym = null; goto L01HX; hsVeL: if (!blank($NX2Ym)) { goto bnGdj; } goto IoLa1; XyRSC: $NX2Ym = app(request("\164\145\x6d\160\154\x61\x74\x65"))->argsSchema(); goto hsVeL; V_s7U: return $this->response()->success($NX2Ym); goto hQFeE; L01HX: bnGdj: goto V_s7U; hQFeE: } }
