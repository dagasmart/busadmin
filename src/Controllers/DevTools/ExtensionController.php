<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-06-22 09:38:12              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace DagaSmart\BizAdmin\Controllers\DevTools; use DagaSmart\BizAdmin\Admin; use Illuminate\Http\Request; use DagaSmart\BizAdmin\Renderers\Form; use DagaSmart\BizAdmin\Extend\Extension; use DagaSmart\BizAdmin\Renderers\DialogAction; use DagaSmart\BizAdmin\Events\ExtensionChanged; use DagaSmart\BizAdmin\Controllers\AdminController; class ExtensionController extends AdminController { public function index() { goto mbQZH; B54Fj: $Hn9oU = $this->basePage()->body($this->list()); goto i8e2L; iFDxr: $J6yf0 = []; goto pwB6h; mbQZH: if (!$this->actionOfGetData()) { goto GQ4Zw; } goto iFDxr; i8e2L: return $this->response()->success($Hn9oU); goto wJLUG; pwB6h: foreach (Admin::extension()->all() as $IYtBO) { $J6yf0[] = $this->each($IYtBO); lTlPy: } goto F6tFf; AJc6I: return $this->response()->success(["\x72\157\x77\163" => $J6yf0]); goto qRxdO; qRxdO: GQ4Zw: goto B54Fj; F6tFf: KHX0W: goto AJc6I; wJLUG: } protected function each($IYtBO) { goto sEMzC; RG8gE: $QOmn1 = Admin::merId(); goto E0fXB; CUJPo: $oGpx3 = $IYtBO->getAlias(); goto AYYCn; gekN4: $Ej3Il = $IYtBO->getVersion(); goto RG8gE; sEMzC: $Y823I = $IYtBO->composerProperty; goto CUJPo; E0fXB: return ["\151\144" => crc32($jFQ2o), "\141\154\151\141\x73" => $oGpx3, "\154\157\x67\157" => $IYtBO->getLogoBase64(), "\156\141\x6d\145" => $oGpx3, "\143\157\x64\145" => $jFQ2o, "\166\145\162\x73\151\x6f\156" => $Ej3Il, "\x64\145\163\x63\x72\151\160\164\151\x6f\156" => $Y823I->description ?? null, "\141\x75\164\150\157\x72\163" => $Y823I->authors ?? null, "\x68\x6f\155\x65\x70\x61\x67\145" => $Y823I->homepage ?? null, "\x65\156\141\142\x6c\x65\144" => $IYtBO->enabled($QOmn1), "\x65\x78\164\x65\156\163\151\x6f\156" => $IYtBO, "\144\157\x63" => $IYtBO->getDocs(), "\150\x61\x73\x5f\163\145\x74\164\151\x6e\x67" => $IYtBO->settingForm() instanceof Form, "\165\163\x65\144" => $IYtBO->used($QOmn1)]; goto cvLoi; AYYCn: $jFQ2o = $IYtBO->getCode(); goto gekN4; cvLoi: } public function list() { return amis()->CRUDTable()->perPage(20)->affixHeader(false)->filterTogglable()->filterDefaultVisible(false)->api($this->getListGetDataPath())->perPageAvailable([10, 20, 30, 50, 100, 200])->footerToolbar(["\x73\x77\151\164\143\150\55\160\x65\x72\55\x70\x61\x67\145", "\x73\x74\141\x74\x69\163\x74\151\143\x73", "\x70\x61\x67\x69\x6e\x61\x74\151\157\156"])->loadDataOnce()->source("\x24\173\162\x6f\x77\x73\x20\174\40\146\151\x6c\164\145\162\x3a\x6e\141\155\x65\72\x6d\x61\164\x63\150\72\153\145\171\x77\157\162\144\x73\x7d")->filter($this->baseFilter()->body([amis()->TextControl()->name("\153\145\x79\x77\157\162\144\163")->label(admin_trans("\141\x64\x6d\151\156\x2e\x65\x78\164\x65\x6e\x73\151\x6f\x6e\x73\56\146\157\x72\x6d\x2e\156\x61\x6d\145"))->placeholder(admin_trans("\141\144\x6d\151\156\x2e\x65\x78\164\x65\x6e\163\151\x6f\x6e\x73\56\x66\151\154\x74\145\162\x5f\x70\x6c\x61\143\145\150\x6f\x6c\144\145\x72"))->size("\155\x64")]))->headerToolbar([$this->moreExtend(), $this->localInstall(), $this->createExtend(), amis("\x72\x65\x6c\157\x61\144")->align("\x72\151\x67\150\x74"), amis("\146\x69\x6c\164\145\162\55\164\157\x67\147\x6c\145\162")->align("\162\x69\x67\150\164")])->columns([amis()->TableColumn("\156\141\155\145", admin_trans("\141\144\x6d\x69\156\x2e\x65\x78\x74\145\x6e\163\x69\x6f\x6e\x73\56\146\157\x72\x6d\x2e\156\141\x6d\x65"))->type("\x74\x70\x6c")->tpl("\15\12\74\x64\151\166\x20\143\154\x61\163\163\75\42\146\154\145\x78\x22\x3e\xd\12\40\x20\40\x20\74\144\x69\166\x3e\40\x3c\x69\x6d\x67\x20\x73\162\x63\x3d\x22\44\x7b\154\157\x67\157\175\x22\40\x63\154\x61\x73\x73\75\42\x77\55\x31\60\x20\x6d\x72\x2d\x34\42\x2f\76\x20\74\x2f\144\x69\166\76\15\xa\40\x20\x20\40\x3c\x64\151\166\76\xd\xa\x20\x20\40\x20\40\x20\x20\40\x3c\144\151\x76\x3e\74\141\x20\150\162\x65\x66\75\42\x24\173\x68\x6f\155\x65\x70\141\x67\x65\x7d\x22\40\x74\x61\x72\x67\x65\164\75\42\137\142\x6c\x61\156\x6b\42\x3e\x24\x7b\156\x61\x6d\145\x20\x7c\x20\164\162\x75\156\x63\141\164\x65\72\x33\x30\x7d\x3c\x2f\x61\x3e\74\57\x64\151\x76\x3e\xd\12\x20\x20\40\40\40\40\40\x20\x3c\144\151\x76\40\x63\154\x61\x73\163\x3d\42\x74\x65\170\x74\55\147\162\141\x79\55\64\x30\60\42\x3e\x24\173\143\x6f\144\145\x7d\74\x2f\x64\x69\166\76\xd\xa\40\40\40\x20\x3c\57\144\151\166\x3e\xd\12\74\57\x64\x69\x76\76\15\12"), amis()->TableColumn("\x61\x75\164\x68\157\x72", admin_trans("\141\x64\155\151\x6e\x2e\x65\170\x74\x65\156\163\151\157\156\x73\56\x63\141\162\x64\56\141\165\164\x68\x6f\162"))->type("\x74\x70\x6c")->tpl("\74\x64\x69\x76\x3e\44\173\141\165\x74\x68\x6f\162\x73\x5b\60\135\56\x6e\141\155\145\x7d\74\x2f\144\x69\166\x3e\40\74\x73\160\141\156\40\x63\154\x61\163\163\75\x22\x74\145\170\164\x2d\147\162\x61\171\x2d\64\60\x30\42\x3e\44\173\141\x75\164\x68\x6f\x72\163\x5b\x30\135\56\x65\x6d\141\151\154\175\74\x2f\x73\160\141\x6e\x3e"), $this->rowActions([amis()->DrawerAction()->label(admin_trans("\x61\x64\155\151\156\x2e\x73\150\x6f\x77"))->className("\x70\x2d\x30")->level("\154\x69\x6e\153")->drawer(amis()->Drawer()->size("\154\x67")->title("\x52\x45\x41\104\x4d\105\x2e\x6d\144")->actions([])->closeOnOutside()->closeOnEsc()->body(amis()->Markdown()->name("\44\x7b\144\x6f\x63\x20\x7c\x20\x72\x61\167\x7d")->options(["\150\x74\x6d\154" => true, "\x62\x72\145\141\x6b\x73" => true]))), amis()->DrawerAction()->label(admin_trans("\141\x64\155\x69\x6e\56\145\x78\x74\x65\x6e\x73\x69\157\x6e\163\x2e\163\x65\164\x74\x69\156\x67"))->level("\154\151\156\153")->visibleOn("\x24\x7b\x68\x61\x73\x5f\163\x65\164\x74\x69\156\x67\40\x26\x26\x20\x65\156\x61\142\154\x65\144\x7d")->drawer(amis()->Drawer()->title(admin_trans("\x61\144\155\151\x6e\x2e\145\170\x74\x65\156\163\151\x6f\156\x73\x2e\x73\x65\x74\x74\x69\156\147"))->resizable()->closeOnOutside()->body(amis()->Service()->schemaApi(["\165\162\x6c" => admin_url("\144\145\x76\137\x74\157\157\x6c\163\57\145\x78\164\x65\x6e\163\151\157\156\x73\57\x63\157\x6e\146\x69\x67\x5f\146\157\162\155"), "\155\145\x74\150\157\144" => "\160\157\x73\x74", "\144\141\x74\x61" => ["\151\x64" => "\x24\x7b\151\144\x7d", "\143\157\144\x65" => "\44\173\143\x6f\x64\x65\175"]]))->actions([])), amis()->AjaxAction()->label("\44\173\145\156\141\142\x6c\145\x64\x20\x3f\40\42" . admin_trans("\x61\144\x6d\151\156\x2e\x65\x78\164\145\x6e\x73\151\157\156\x73\x2e\144\x69\x73\141\x62\x6c\145") . "\x22\x20\x3a\40\x22" . admin_trans("\141\x64\x6d\x69\156\56\145\x78\164\x65\156\163\151\x6f\156\x73\x2e\x65\x6e\x61\142\x6c\x65") . "\x22\x7d")->level("\x6c\151\156\153")->className(["\x74\145\x78\164\55\x64\x61\156\147\x65\x72" => "\44\173\145\x6e\x61\142\x6c\145\144\x7d"])->api(["\165\162\x6c" => admin_url("\144\145\166\x5f\x74\x6f\157\154\163\x2f\x65\x78\164\x65\x6e\x73\151\x6f\156\163\57\x65\x6e\x61\x62\154\145"), "\x6d\145\164\150\157\x64" => "\160\157\x73\x74", "\144\141\164\141" => ["\151\x64" => "\44\x7b\x69\144\x7d", "\x6e\x61\155\145" => "\x24\173\x6e\x61\155\x65\175", "\143\x6f\x64\145" => "\44\173\x63\157\x64\145\175", "\145\156\141\142\154\145\x64" => "\44\173\41\145\156\x61\x62\154\145\144\175"]])->confirmText("\x24\173\x65\x6e\x61\142\154\145\144\x20\77\x20\42" . admin_trans("\x61\x64\x6d\x69\x6e\x2e\x65\x78\x74\x65\156\x73\151\x6f\156\x73\56\x64\x69\163\x61\142\x6c\145\x5f\143\157\156\x66\151\x72\155") . "\42\x20\72\x20\42" . admin_trans("\x61\x64\155\151\156\56\145\x78\x74\x65\156\163\151\157\x6e\163\x2e\145\x6e\141\x62\154\145\137\x63\157\156\146\151\162\155") . "\42\x7d"), amis()->AjaxAction()->label(admin_trans("\x61\144\155\151\x6e\56\145\x78\164\x65\x6e\x73\151\157\x6e\163\56\x75\156\x69\x6e\x73\164\x61\154\154"))->level("\x6c\x69\156\153")->className("\164\x65\x78\x74\55\144\x61\156\147\x65\162")->api(["\165\162\x6c" => admin_url("\144\145\166\137\164\x6f\x6f\x6c\163\57\145\x78\x74\145\x6e\x73\151\x6f\156\x73\57\x75\x6e\151\x6e\163\164\141\154\x6c"), "\x6d\145\164\x68\x6f\144" => "\x70\x6f\x73\164", "\144\141\164\x61" => ["\x69\144" => "\x24\x7b\x69\144\x7d", "\x63\157\144\x65" => "\x24\x7b\x63\157\x64\145\175"]])->visibleOn("\44\x7b\x75\x73\145\144\x7d")->confirmText(admin_trans("\x61\144\155\x69\156\56\x65\170\164\x65\156\x73\x69\157\x6e\163\56\165\156\x69\156\x73\x74\141\x6c\154\x5f\x63\157\x6e\x66\x69\x72\155"))])]); } public function createExtend() { return amis()->DialogAction()->label(admin_trans("\x61\144\155\x69\x6e\56\145\x78\x74\x65\x6e\163\151\157\156\163\x2e\143\x72\x65\x61\164\145\x5f\145\170\x74\145\x6e\163\151\x6f\x6e"))->icon("\146\x61\x20\x66\x61\55\141\x64\144")->dialog(amis()->Dialog()->title(admin_trans("\141\144\155\x69\x6e\56\145\170\x74\x65\156\x73\151\157\156\x73\56\x63\162\145\x61\164\145\137\x65\170\x74\x65\x6e\163\x69\157\156"))->body(amis()->Form()->mode("\x6e\157\162\155\x61\154")->api($this->getStorePath())->body([amis()->Alert()->level("\x69\x6e\146\x6f")->showIcon()->body(admin_trans("\x61\144\155\x69\156\x2e\145\x78\164\x65\156\163\151\157\156\x73\x2e\143\x72\x65\x61\164\145\x5f\x74\151\160\163", ["\x64\x69\x72" => config("\141\x64\x6d\x69\156\x2e\145\x78\164\x65\156\163\151\157\x6e\56\144\x69\162")])), amis()->TextControl()->name("\x61\154\151\141\x73")->label(admin_trans("\x61\x64\x6d\151\156\56\145\x78\164\145\x6e\x73\x69\x6f\x6e\163\56\x66\157\162\x6d\56\x61\x6c\x69\x61\x73"))->placeholder(admin_trans("\141\x64\155\151\156\x2e\145\x78\164\x65\x6e\x73\151\x6f\x6e\163\56\x66\x6f\162\155\x2e\x61\x6c\x69\141\163\137\x70\x6c\141\x63\x65\x68\x6f\154\x64\145\x72"))->required(), amis()->TextControl()->name("\x6e\141\155\145")->label(admin_trans("\141\144\155\x69\x6e\56\145\170\x74\145\x6e\163\x69\x6f\x6e\x73\56\x66\x6f\x72\x6d\56\x6e\141\x6d\145"))->placeholder(admin_trans("\141\x64\155\151\156\56\145\170\x74\x65\156\x73\151\157\156\163\56\x66\x6f\x72\155\x2e\x65\x67") . "\x62\x69\x7a\x2f\x6f\x61")->required(), amis()->TextControl()->name("\156\x61\x6d\x65\x73\x70\141\143\145")->label(admin_trans("\x61\144\x6d\151\156\x2e\x65\x78\x74\145\156\163\x69\157\x6e\163\56\x66\x6f\x72\x6d\56\x6e\141\155\x65\163\x70\x61\x63\145"))->placeholder(admin_trans("\x61\144\x6d\x69\156\56\x65\x78\164\145\x6e\x73\x69\x6f\x6e\x73\x2e\146\157\162\x6d\56\145\x67") . "\x42\x69\x7a\134\117\141")->required(), amis()->TextareaControl()->name("\x64\145\163\143\162\x69\x70\x74\x69\157\x6e")->label(admin_trans("\x61\x64\155\x69\156\56\145\170\164\145\x6e\163\x69\x6f\156\x73\x2e\146\157\x72\x6d\x2e\144\x65\163\x63\x72\x69\x70\164\151\157\x6e"))->placeholder(admin_trans("\141\144\155\x69\x6e\x2e\145\x78\x74\145\x6e\x73\151\x6f\156\163\56\x66\157\162\155\x2e\x64\x65\x73\x63\162\151\x62\145\x5f\160\154\x61\x63\145\150\157\154\x64\x65\162"))->required()]))); } public function store(Request $CDBRf) { goto t3N1W; m9010: $IYtBO->createDir($CDBRf->alias, $CDBRf->name, $CDBRf->namespace, $CDBRf->description); goto J89C9; A8mEF: ExtensionChanged::dispatch($CDBRf->name, "\x63\162\145\141\164\145"); goto owXia; t3N1W: $IYtBO = Extension::make(); goto m9010; FX7dV: emxRh: goto A8mEF; sLbrq: return $this->response()->fail($IYtBO->getError()); goto FX7dV; J89C9: if (!$IYtBO->hasError()) { goto emxRh; } goto sLbrq; owXia: return $this->response()->successMessage(admin_trans("\x61\x64\155\x69\156\56\x73\165\x63\143\145\x73\x73\146\165\154\154\171\137\x6d\145\163\163\141\x67\145", ["\141\x74\x74\162\x69\x62\165\164\x65" => admin_trans("\141\144\155\x69\x6e\56\x65\x78\164\x65\156\x73\x69\x6f\156\163\x2e\143\162\145\141\x74\x65")])); goto xu03C; xu03C: } public function localInstall() { return amis()->DialogAction()->label(admin_trans("\x61\144\x6d\x69\x6e\x2e\x65\170\164\x65\x6e\x73\x69\x6f\156\x73\x2e\x6c\x6f\143\141\154\x5f\151\156\x73\x74\141\x6c\154"))->icon("\146\141\55\163\157\154\151\x64\40\146\141\x2d\x63\x6c\157\165\144\55\x61\x72\x72\x6f\167\55\165\x70")->dialog(amis()->Dialog()->title(admin_trans("\141\x64\155\151\156\x2e\145\x78\164\x65\x6e\x73\x69\x6f\156\163\x2e\154\157\143\x61\154\137\x69\156\x73\164\141\x6c\x6c"))->showErrorMsg(false)->body(amis()->Form()->mode("\156\x6f\162\x6d\x61\x6c")->api("\160\x6f\163\164\72" . admin_url("\x64\x65\x76\x5f\x74\157\x6f\x6c\x73\57\145\x78\164\145\x6e\x73\x69\157\156\x73\57\151\x6e\x73\x74\x61\x6c\154"))->body([amis()->FileControl()->name("\x66\x69\154\145")->label()->required()->drag()->accept("\x2e\x7a\x69\x70")]))); } public function moreExtend() { return amis()->UrlAction()->url("\150\x74\164\x70\163\x3a\57\57\x62\151\172\56\x64\x61\147\x61\x73\x6d\x61\162\164\56\143\157\x6d\x2f\145\170\164")->label(admin_trans("\141\144\x6d\151\x6e\x2e\145\x78\x74\145\x6e\163\x69\157\156\x73\56\155\157\x72\x65\137\x65\170\x74\145\x6e\163\x69\x6f\x6e\163"))->icon("\x66\141\x2d\162\145\x67\165\x6c\141\162\40\146\x61\55\x6c\151\x67\150\x74\x62\x75\154\x62")->level("\x73\x75\x63\x63\x65\x73\163")->blank(); } public function install(Request $CDBRf) { goto FBf6I; GVIi0: try { goto EtksB; bb07l: if ($Cd0jl) { goto Z4x0C; } goto tLO8V; xZiUU: Z4x0C: goto MhtGU; khGY5: return $this->response()->successMessage(admin_trans("\x61\144\x6d\x69\156\x2e\163\x75\143\x63\145\x73\163\146\x75\x6c\154\171\x5f\155\x65\163\x73\x61\x67\x65", ["\141\164\x74\162\x69\142\x75\164\x65" => admin_trans("\x61\x64\x6d\x69\156\56\x65\x78\164\x65\x6e\x73\151\x6f\156\x73\x2e\151\x6e\163\x74\141\154\154")])); goto EcUV8; tLO8V: return $this->response()->fail(admin_trans("\x61\144\155\151\x6e\56\x65\x78\x74\x65\x6e\163\x69\157\156\163\x2e\166\x61\x6c\151\x64\x61\164\151\157\x6e\x2e\x69\x6e\166\x61\154\151\x64\x5f\160\141\143\153\141\x67\x65")); goto xZiUU; eRmAm: $Cd0jl = $KAvp_->extract($ZkOaA, true); goto bb07l; EtksB: $ZkOaA = $this->getFilePath($o0zdn); goto RLaH0; MhtGU: ExtensionChanged::dispatch($Cd0jl, "\x69\156\163\x74\x61\x6c\x6c"); goto khGY5; RLaH0: $KAvp_ = Admin::extension(); goto eRmAm; EcUV8: } catch (\Throwable $FXDMR) { return $this->response()->fail($FXDMR->getMessage()); } finally { if (empty($ZkOaA)) { goto iQNdL; } @unlink($ZkOaA); iQNdL: } goto GPri7; b0RO9: return $this->response()->fail(admin_trans("\141\144\x6d\151\x6e\x2e\x65\x78\164\145\x6e\163\x69\x6f\156\x73\x2e\x76\141\154\x69\x64\141\x74\151\157\156\56\146\x69\154\x65")); goto fOF1F; fOF1F: oIWHR: goto GVIi0; NOv4d: if ($o0zdn) { goto oIWHR; } goto b0RO9; FBf6I: $o0zdn = $CDBRf->input("\146\151\154\145"); goto NOv4d; GPri7: } protected function getFilePath($o0zdn) { goto tG_jf; A4xAu: throw new \Exception(sprintf("\115\x69\163\163\151\156\x67\x20\47\162\x6f\157\164\47\x20\x66\157\162\x20\x64\151\163\153\40\133\x25\163\135\56", $YlF8B)); goto p9e30; HAkkP: if ($iV60D) { goto fszFy; } goto A4xAu; tG_jf: $YlF8B = Admin::config("\141\x64\155\x69\156\56\165\160\x6c\x6f\141\144\56\x64\x69\x73\153") ?: "\154\157\143\x61\x6c"; goto Xue7W; LkudF: return rtrim($iV60D, "\57") . "\x2f" . $o0zdn; goto ZTjyx; p9e30: fszFy: goto LkudF; Xue7W: $iV60D = Admin::config("\x66\151\x6c\x65\163\171\x73\164\x65\155\163\56\144\x69\163\x6b\x73\x2e{$YlF8B}\x2e\162\x6f\x6f\164"); goto HAkkP; ZTjyx: } public function enable(Request $CDBRf) { goto XRqbG; XRqbG: Admin::extension()->enable($CDBRf); goto B6u0m; LGnUg: return $this->response()->successMessage(admin_trans("\141\144\x6d\x69\156\x2e\141\x63\x74\x69\x6f\156\x5f\163\165\x63\143\x65\x73\x73")); goto TS7RS; B6u0m: ExtensionChanged::dispatch($CDBRf->code, $CDBRf->enabled ? "\145\156\x61\142\154\145" : "\144\151\x73\x61\142\x6c\x65"); goto LGnUg; TS7RS: } public function uninstall(Request $CDBRf) { goto xHs2N; j105R: ExtensionChanged::dispatch($CDBRf->code, "\165\x6e\x69\x6e\x73\x74\141\x6c\154"); goto W0wOR; W0wOR: return $this->response()->successMessage(admin_trans("\141\144\x6d\x69\156\56\x61\x63\164\x69\x6f\x6e\137\x73\165\143\143\145\x73\x73")); goto zk4lA; xHs2N: Admin::extension($CDBRf->code)->uninstall(); goto j105R; zk4lA: } public function saveConfig(Request $CDBRf) { goto BuuQ4; lUPNt: return $this->response()->successMessage(admin_trans("\x61\144\155\x69\156\56\x73\x61\x76\145\137\x73\165\143\143\145\x73\x73")); goto xg00p; BuuQ4: $J6yf0 = collect($CDBRf->all())->except(["\145\x78\164\145\x6e\163\151\157\x6e"])->toArray(); goto Tfexn; Tfexn: Admin::extension($CDBRf->input("\x65\x78\164\145\156\163\151\157\x6e"))->saveConfig($J6yf0); goto lUPNt; xg00p: } public function getConfig(Request $CDBRf) { $FP1bf = Admin::extension($CDBRf->input("\x65\170\x74\145\x6e\163\151\157\x6e"))->config(); return $this->response()->success($FP1bf); } public function configForm(Request $CDBRf) { $fntJq = Admin::extension($CDBRf->code)->settingForm(); return $this->response()->success($fntJq); } }
