<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-06-22 09:38:12              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace DagaSmart\BizAdmin\Controllers\DevTools; use Illuminate\Support\Facades\Schema; use DagaSmart\BizAdmin\Support\Cores\Database; use DagaSmart\BizAdmin\Models\AdminRelationship; use DagaSmart\BizAdmin\Controllers\AdminController; use DagaSmart\BizAdmin\Services\AdminRelationshipService; class RelationshipController extends AdminController { protected string $serviceName = AdminRelationshipService::class; public function list() { $PeHpb = $this->baseCRUD()->filter($this->baseFilter()->body([amis()->TextControl("\155\x6f\x64\145\x6c", admin_trans("\x61\144\155\151\x6e\x2e\x72\x65\x6c\141\164\x69\157\156\x73\150\x69\x70\163\56\x6d\157\x64\145\154"))->size("\x6d\144")->clearable()->placeholder(admin_trans("\141\144\x6d\151\x6e\56\x72\145\x6c\x61\164\151\x6f\156\x73\150\151\x70\x73\56\x6d\157\x64\x65\154")), amis()->TextControl("\x74\151\164\x6c\145", admin_trans("\141\x64\155\151\156\x2e\x72\x65\154\x61\164\x69\157\156\x73\150\151\x70\x73\x2e\164\x69\164\154\145"))->size("\x6d\x64")->clearable()->placeholder(admin_trans("\x61\x64\155\x69\x6e\x2e\x72\x65\154\141\164\151\157\156\163\x68\x69\160\163\x2e\x74\x69\x74\154\x65")), amis()->TextControl("\x72\x65\155\x61\162\x6b", admin_trans("\x61\144\155\151\156\x2e\x72\x65\154\x61\164\151\x6f\x6e\x73\150\x69\x70\x73\56\x72\x65\155\x61\x72\153"))->size("\x6d\x64")->clearable()->placeholder(admin_trans("\x61\144\x6d\151\x6e\x2e\x72\x65\x6c\x61\164\151\157\x6e\163\150\151\160\x73\x2e\162\145\155\x61\x72\153"))]))->headerToolbar([$this->createButton(true, "\x6c\x67"), ...$this->baseHeaderToolBar(), $this->modelGenerator()])->columns([amis()->TableColumn("\x69\144", "\111\104")->sortable(), amis()->TableColumn("\155\x6f\x64\x65\154", admin_trans("\141\144\155\x69\x6e\x2e\162\145\x6c\x61\164\x69\x6f\156\x73\x68\151\160\x73\x2e\155\157\x64\145\x6c")), amis()->TableColumn("\x74\x69\x74\x6c\145", admin_trans("\141\x64\x6d\x69\x6e\56\x72\x65\154\x61\164\151\x6f\x6e\x73\150\151\x70\163\x2e\x74\x69\x74\x6c\x65")), amis()->TableColumn("\162\145\x6d\x61\162\153", admin_trans("\141\x64\155\x69\x6e\56\x72\145\x6c\x61\164\151\x6f\156\x73\x68\151\160\x73\56\162\145\155\x61\x72\x6b")), $this->rowActions([$this->previewButton(), $this->rowEditButton(true, "\x6c\147"), $this->rowDeleteButton()])]); return $this->baseList($PeHpb); } public function modelGenerator() { return amis()->DrawerAction()->label(admin_trans("\141\144\155\151\156\56\162\145\x6c\141\164\x69\x6f\x6e\x73\150\151\160\x73\x2e\147\x65\156\145\162\141\x74\x65\x5f\x6d\x6f\144\145\154"))->level("\x73\165\x63\x63\x65\163\x73")->drawer(amis()->Drawer()->title(admin_trans("\x61\x64\x6d\151\156\x2e\x72\145\x6c\x61\164\x69\x6f\156\163\150\151\160\163\x2e\147\145\156\145\x72\x61\164\x65\x5f\x6d\157\x64\x65\x6c"))->size("\154\x67")->resizable()->closeOnOutside()->closeOnEsc()->actions([amis()->VanillaAction()->label(admin_trans("\141\144\155\x69\x6e\x2e\x72\x65\154\141\164\151\157\156\x73\150\x69\160\163\56\x67\145\156\x65\162\x61\x74\x65"))->actionType("\x73\165\x62\155\151\x74")->level("\160\162\151\155\141\162\x79")])->body([amis()->Form()->api("\57\144\x65\x76\137\164\x6f\157\x6c\163\x2f\162\145\x6c\x61\x74\151\157\156\57\147\x65\x6e\145\162\141\164\145\137\155\x6f\144\145\x6c")->initApi("\57\144\145\166\x5f\x74\x6f\157\x6c\163\57\x72\145\x6c\x61\164\x69\157\156\x2f\141\x6c\x6c\x5f\x6d\x6f\x64\x65\x6c\163")->mode("\156\x6f\x72\x6d\141\x6c")->body([amis()->TreeControl()->name("\x63\150\145\x63\x6b\x5f\164\x61\x62\x6c\x65\x73")->label()->multiple()->heightAuto()->required()->source("\x24\x7b\x61\x6c\x6c\x5f\155\x6f\144\x65\154\163\175")->searchable()->joinValues(false)->extractValue()->size("\x66\165\x6c\154")->className("\150\x2d\146\165\154\x6c\40\142\55\156\157\156\x65")->inputClassName("\150\55\x66\165\154\154\40\164\x72\145\x65\55\146\x75\154\154")->set("\155\145\x6e\x75\124\x70\x6c", "\x24\x7b\x6c\x61\x62\x65\x6c\175\x20\x3c\163\x70\141\156\40\143\x6c\141\163\x73\75\42\x74\145\170\x74\55\147\162\x61\171\55\x33\x30\60\40\x70\x6c\x2d\x32\x22\76\x24\173\x6d\157\144\x65\x6c\175\74\57\x73\160\141\156\x3e")])])); } public function previewButton() { return amis()->DrawerAction()->label(admin_trans("\141\x64\155\x69\156\56\160\x72\145\x76\151\145\167"))->level("\x6c\x69\156\x6b")->drawer(amis()->Drawer()->position("\164\x6f\x70")->resizable()->title(admin_trans("\x61\144\x6d\x69\156\56\x70\162\x65\166\x69\x65\167"))->actions([])->showCloseButton(false)->closeOnEsc()->closeOnOutside()->body(amis()->Code()->value("\x24\173\160\x72\145\166\x69\x65\167\137\143\x6f\x64\x65\40\x7c\x20\x72\x61\x77\175")->language("\x70\x68\160"))); } public function form() { goto MBZvl; FH42T: $YWBN8 = function ($yE039, $T1ha6, $celUv = "\137\142\x6c\141\156\x6b\x5f\155\x6f\144\x65\x6c", $j6YP8 = "\137\142\154\141\x6e\153\137\x74\x61\142\x6c\x65") { return amis()->TextControl($yE039, $T1ha6)->source("\x2f\x64\145\x76\137\164\157\157\154\163\57\162\x65\154\x61\x74\x69\157\156\57\x63\157\154\x75\155\156\x5f\x6f\160\164\x69\157\x6e\163\77\x6d\157\144\x65\154\75\44\173" . $celUv . "\x7d\46\164\x61\142\154\x65\75\x24\173" . $j6YP8 . "\175"); }; goto QUIZi; rGysr: return $this->baseForm()->data(["\164\x61\142\x6c\x65\163" => Database::getTables()])->body([amis()->GroupControl()->body([amis()->GroupControl()->direction("\166\145\x72\164\151\143\141\x6c")->body([$zB_nX("\x6d\157\x64\145\154", admin_trans("\x61\x64\155\x69\x6e\x2e\162\x65\x6c\141\x74\x69\x6f\156\163\150\x69\x70\163\x2e\x6d\157\144\145\x6c")), amis()->TextControl("\x74\151\164\154\145", admin_trans("\x61\x64\x6d\151\156\56\162\145\x6c\x61\164\151\157\x6e\x73\150\x69\160\163\56\x74\x69\164\x6c\x65"))->required()->placeholder("\143\x6f\155\155\145\156\164\163"), amis()->TextControl("\x72\145\x6d\141\162\x6b", admin_trans("\141\x64\155\151\x6e\x2e\x72\145\x6c\x61\164\x69\157\x6e\163\x68\x69\160\x73\56\x72\x65\x6d\141\162\153")), amis()->SelectControl("\x74\171\x70\145", admin_trans("\141\144\x6d\151\156\x2e\x72\x65\154\141\x74\x69\x6f\x6e\x73\150\x69\x70\163\56\164\x79\160\x65"))->required()->value(AdminRelationship::TYPE_BELONGS_TO)->menuTpl("\44\173\154\x61\142\145\x6c\175\x20\74\x73\x70\141\156\40\143\x6c\x61\163\163\x3d\42\164\x65\x78\164\x2d\147\162\141\x79\x2d\63\60\60\40\x70\154\x2d\62\x22\x3e\x24\173\x6d\145\x74\150\157\x64\x7d\74\57\x73\x70\141\156\x3e")->options(AdminRelationship::typeOptions())]), $JzDEm(AdminRelationship::TYPE_HAS_ONE, [$zB_nX("\162\145\154\141\164\145\144", admin_trans("\x61\x64\x6d\151\156\56\162\145\x6c\x61\164\x69\157\156\163\150\151\x70\163\56\162\145\x6c\x61\164\x65\144\137\155\x6f\144\145\154")), $YWBN8("\146\x6f\162\x65\151\x67\x6e\113\145\x79", "\146\157\x72\145\151\147\156\x4b\x65\x79", "\162\145\154\141\x74\x65\x64"), $YWBN8("\154\x6f\x63\x61\x6c\113\x65\x79", "\x6c\x6f\143\141\x6c\113\145\x79", "\x6d\x6f\144\145\x6c")]), $JzDEm(AdminRelationship::TYPE_HAS_MANY, [$zB_nX("\162\x65\x6c\141\164\145\144", admin_trans("\x61\144\x6d\151\x6e\56\x72\145\154\141\x74\x69\157\156\163\150\151\x70\163\56\x72\145\x6c\x61\x74\145\144\x5f\155\x6f\x64\x65\x6c")), $YWBN8("\146\x6f\162\145\151\147\x6e\113\145\x79", "\146\157\162\x65\x69\147\156\x4b\x65\171", "\x72\x65\154\141\164\145\x64"), $YWBN8("\x6c\x6f\143\x61\154\x4b\x65\171", "\x6c\157\x63\x61\154\113\x65\x79", "\155\x6f\x64\145\154")]), $JzDEm(AdminRelationship::TYPE_BELONGS_TO, [$zB_nX("\x72\x65\x6c\141\x74\145\x64", admin_trans("\141\x64\x6d\x69\156\x2e\162\x65\x6c\x61\164\x69\157\156\163\150\x69\x70\x73\x2e\162\145\154\141\x74\x65\144\137\155\157\x64\145\154")), $YWBN8("\146\157\162\x65\x69\x67\x6e\x4b\x65\x79", "\146\x6f\162\145\151\x67\156\113\x65\x79", "\155\157\144\x65\154"), $YWBN8("\157\167\x6e\145\x72\113\145\x79", "\157\167\x6e\145\x72\x4b\145\171", "\x72\x65\x6c\141\164\145\x64"), amis()->TextControl("\x72\x65\154\x61\x74\151\x6f\156", "\162\145\x6c\x61\164\151\x6f\x6e")]), $JzDEm(AdminRelationship::TYPE_BELONGS_TO_MANY, [$zB_nX("\x72\145\154\141\164\145\144", admin_trans("\x61\144\x6d\x69\x6e\56\x72\x65\154\141\x74\x69\x6f\156\x73\150\151\x70\x73\x2e\162\x65\154\x61\164\x65\x64\137\155\x6f\x64\x65\x6c")), amis()->SelectControl("\164\141\x62\154\145", "\x74\x61\x62\x6c\x65")->source("\x24\x7b\x74\141\142\x6c\x65\x73\x7d")->searchable(), $YWBN8("\146\x6f\x72\x65\x69\147\156\x50\x69\166\157\164\x4b\x65\171", "\x66\157\162\x65\x69\147\156\x50\x69\166\157\x74\113\145\171", "\137\142\154\141\156\153\137\x6d\x6f\x64\x65\x6c", "\x74\x61\142\x6c\145"), $YWBN8("\x72\x65\154\x61\x74\145\x64\120\x69\x76\157\164\113\x65\x79", "\162\x65\154\141\164\x65\x64\x50\x69\x76\157\x74\x4b\145\171", "\x5f\142\154\x61\156\x6b\x5f\155\x6f\x64\145\154", "\x74\x61\142\154\145"), $YWBN8("\160\141\162\145\x6e\x74\113\x65\x79", "\160\141\162\145\156\164\113\x65\171", "\x6d\x6f\144\x65\154"), $YWBN8("\x72\145\x6c\x61\x74\x65\x64\x4b\145\171", "\x72\145\x6c\x61\164\x65\144\113\145\171", "\162\x65\x6c\x61\x74\x65\144"), amis()->TextControl("\x72\145\154\x61\x74\151\x6f\x6e", "\162\x65\154\x61\164\151\x6f\156")]), $JzDEm(AdminRelationship::TYPE_HAS_ONE_THROUGH, [$zB_nX("\x72\x65\x6c\141\x74\x65\144", admin_trans("\141\x64\155\151\x6e\56\x72\x65\x6c\141\164\x69\157\156\163\150\151\x70\163\x2e\x72\x65\x6c\141\164\145\144\137\x6d\157\144\x65\154")), $zB_nX("\x74\150\x72\157\165\x67\150", admin_trans("\x61\x64\x6d\151\x6e\56\162\145\154\x61\x74\x69\157\156\163\x68\x69\x70\163\56\164\x68\x72\157\165\147\x68\137\x6d\157\x64\x65\154")), $YWBN8("\x66\151\x72\x73\164\113\x65\x79", "\x66\151\162\163\x74\113\x65\171", "\x74\150\162\157\165\x67\x68"), $YWBN8("\x73\x65\143\157\156\144\x4b\145\x79", "\163\145\x63\x6f\x6e\144\x4b\x65\x79", "\x72\145\x6c\x61\164\145\x64"), $YWBN8("\154\157\143\141\x6c\113\x65\x79", "\154\157\143\141\154\113\x65\x79", "\x6d\x6f\x64\145\154"), $YWBN8("\x73\145\x63\x6f\x6e\144\114\x6f\x63\141\154\113\145\x79", "\163\145\143\x6f\156\x64\x4c\x6f\x63\141\x6c\113\145\x79", "\164\150\162\157\x75\147\x68")]), $JzDEm(AdminRelationship::TYPE_HAS_MANY_THROUGH, [$zB_nX("\x72\145\154\x61\164\x65\x64", admin_trans("\x61\x64\155\x69\156\56\x72\145\x6c\x61\x74\x69\x6f\156\163\x68\151\x70\163\x2e\162\x65\154\141\164\145\144\x5f\x6d\157\x64\145\154")), $zB_nX("\164\x68\162\157\x75\x67\x68", admin_trans("\x61\x64\155\151\156\x2e\x72\x65\x6c\141\x74\151\x6f\156\x73\x68\151\x70\163\x2e\164\150\x72\x6f\x75\x67\150\137\155\x6f\144\145\154")), $YWBN8("\146\x69\x72\x73\164\x4b\x65\171", "\x66\151\162\163\164\113\x65\x79", "\164\150\162\x6f\x75\147\150"), $YWBN8("\x73\145\x63\157\x6e\144\113\x65\x79", "\x73\145\x63\x6f\156\x64\113\x65\171", "\x72\145\x6c\x61\x74\145\144"), $YWBN8("\x6c\x6f\x63\x61\x6c\113\x65\171", "\x6c\x6f\x63\141\x6c\113\145\x79", "\x6d\157\x64\x65\154"), $YWBN8("\163\x65\143\x6f\156\144\114\x6f\x63\x61\x6c\113\145\x79", "\x73\145\x63\x6f\156\x64\114\157\143\x61\x6c\113\x65\171", "\x74\150\162\157\165\147\x68")]), $JzDEm(AdminRelationship::TYPE_MORPH_ONE, [$zB_nX("\x72\x65\x6c\x61\164\x65\144", admin_trans("\x61\x64\155\x69\156\56\162\145\154\141\164\x69\157\x6e\163\150\151\160\163\x2e\x72\145\x6c\141\x74\145\x64\137\155\x6f\144\145\x6c")), amis()->TextControl("\156\141\155\x65", "\156\x61\155\x65")->required(), amis()->TextControl("\164\171\160\145", "\x74\171\160\145"), amis()->TextControl("\x69\x64", "\151\144"), $YWBN8("\154\157\143\x61\154\113\x65\x79", "\154\157\x63\x61\154\x4b\145\171", "\x6d\x6f\x64\x65\x6c")]), $JzDEm(AdminRelationship::TYPE_MORPH_MANY, [$zB_nX("\x72\x65\x6c\141\x74\145\x64", admin_trans("\141\x64\x6d\151\156\x2e\162\145\x6c\141\164\151\x6f\x6e\163\x68\x69\160\163\56\162\x65\154\x61\164\x65\x64\137\155\x6f\x64\x65\154")), amis()->TextControl("\x6e\141\155\x65", "\x6e\x61\155\x65")->required(), amis()->TextControl("\164\171\160\x65", "\164\171\160\145"), amis()->TextControl("\151\144", "\x69\x64"), $YWBN8("\x6c\x6f\x63\x61\154\113\x65\171", "\x6c\x6f\x63\141\x6c\x4b\145\171", "\155\157\x64\145\154")]), $JzDEm(AdminRelationship::TYPE_MORPH_TO_MANY, [$zB_nX("\162\x65\x6c\x61\164\145\144", admin_trans("\x61\144\x6d\151\x6e\x2e\x72\145\154\141\x74\151\x6f\x6e\x73\150\151\160\163\56\x72\145\154\x61\x74\x65\144\137\x6d\x6f\144\145\154")), amis()->TextControl("\x6e\x61\x6d\x65", "\x6e\141\155\x65")->required(), amis()->SelectControl("\164\x61\x62\154\x65", "\164\141\x62\154\x65")->source("\x24\x7b\164\141\142\154\145\163\x7d")->searchable(), $YWBN8("\x66\x6f\x72\x65\151\147\156\120\x69\166\157\164\x4b\x65\171", "\146\x6f\162\x65\x69\147\x6e\x50\151\166\157\164\113\x65\x79", "\x5f\x62\154\141\x6e\153\137\155\x6f\x64\x65\154", "\164\141\142\x6c\145"), $YWBN8("\x72\145\x6c\x61\x74\x65\x64\x50\151\x76\157\164\x4b\x65\x79", "\162\x65\x6c\141\164\x65\x64\x50\151\x76\x6f\x74\113\x65\x79", "\137\142\x6c\x61\156\x6b\137\155\x6f\x64\145\154", "\164\141\142\154\145"), $YWBN8("\x70\141\162\145\x6e\x74\113\x65\171", "\x70\141\x72\145\x6e\164\113\x65\171", "\155\x6f\144\x65\x6c"), $YWBN8("\162\x65\x6c\x61\x74\145\144\113\x65\171", "\x72\145\x6c\141\164\x65\144\113\x65\171", "\x72\x65\x6c\x61\164\145\144"), amis()->TextControl("\151\x6e\x76\x65\162\x73\x65", "\151\x6e\166\x65\x72\x73\145")])])]); goto QRZ5R; MBZvl: $zB_nX = function ($yE039, $T1ha6) { return amis()->SelectControl($yE039, $T1ha6)->required()->menuTpl("\44\173\x6c\141\x62\145\x6c\175\40\74\x73\160\x61\x6e\40\x63\154\x61\163\163\75\x22\x74\x65\x78\x74\x2d\147\162\x61\171\x2d\x33\x30\x30\x20\x70\154\55\62\42\76\44\173\x74\141\142\x6c\145\175\74\57\163\x70\141\x6e\76")->source("\x2f\144\x65\166\x5f\x74\x6f\x6f\154\x73\x2f\x72\x65\x6c\141\x74\151\x6f\156\57\155\x6f\144\x65\154\137\x6f\x70\164\151\x6f\x6e\163")->searchable(); }; goto FH42T; QUIZi: $JzDEm = function ($I6sOc, $WMICj) { return amis()->ComboControl("\141\162\x67\x73", admin_trans("\141\144\155\151\156\x2e\162\x65\154\141\164\x69\157\156\x73\x68\151\x70\x73\x2e\141\162\x67\x73"))->multiLine()->strictMode(false)->items($WMICj)->visibleOn("\44\173\x74\x79\160\x65\x20\x3d\75\40\x22" . $I6sOc . "\x22\175"); }; goto rGysr; QRZ5R: } public function detail($H0Ru3) { return $this->baseDetail()->body([]); } public function modelOptions() { $e_726 = $this->service->allModels()["\155\157\144\x65\154\x73"]; return $this->response()->success($e_726); } public function columnOptions() { goto v_kQ9; InoYD: return $this->response()->success($kX4rm); goto DZquG; v_kQ9: $MWice = request("\x6d\157\144\x65\x6c"); goto N06Np; LI19D: eYXie: goto R6QHg; R6QHg: $FDXE6 = $FDXE6 ?: app($MWice)->getTable(); goto iWSbz; iWSbz: $kX4rm = Schema::getColumnListing($FDXE6); goto InoYD; MHNnv: return $this->response()->success([]); goto LI19D; f3Ofj: if (!(blank($MWice) && blank($FDXE6))) { goto eYXie; } goto MHNnv; N06Np: $FDXE6 = request("\164\x61\x62\154\x65"); goto f3Ofj; DZquG: } public function allModels() { goto rnC3k; QOnbI: $e_726 = collect($cDL9W["\155\157\144\x65\x6c\163"])->keyBy("\x74\x61\x62\154\145"); goto bGCfY; d98XK: $Fl8WN = $cDL9W["\x74\141\142\x6c\145\x73"]; goto QOnbI; rnC3k: $cDL9W = $this->service->allModels(); goto d98XK; bGCfY: $wc21F = collect($Fl8WN)->map(function ($dr0sI) use($e_726) { $MWice = data_get($e_726, $dr0sI . "\56\166\x61\x6c\165\145"); return ["\166\141\x6c\165\145" => $dr0sI, "\154\x61\x62\145\x6c" => $dr0sI, "\x6d\x6f\144\x65\x6c" => $MWice, "\144\151\x73\x61\x62\154\145\144" => (bool) $MWice]; })->sortBy("\x64\151\x73\x61\x62\x6c\145\x64")->values(); goto TKPH_; TKPH_: return $this->response()->success(compact("\x61\154\x6c\137\x6d\157\144\145\154\163")); goto vA1HJ; vA1HJ: } public function generateModel() { goto w0o1N; ceN0u: try { foreach ($Fl8WN as $FDXE6) { $this->service->generateModel($FDXE6); xqcYO: } FuGOX: } catch (\Throwable $FXDMR) { return $this->response()->fail($FXDMR->getMessage()); } goto jvf8P; toyFK: $kiLYC = array_intersect($Fl8WN, $npf64); goto TvbYu; VyQ1g: $npf64 = collect($this->service->allModels()["\155\x6f\144\x65\x6c\x73"])->pluck("\x74\x61\142\154\145")->toArray(); goto toyFK; w0o1N: $Fl8WN = request("\x63\150\145\x63\x6b\x5f\x74\x61\142\x6c\x65\x73"); goto VyQ1g; TvbYu: admin_abort_if(filled($kiLYC), admin_trans("\x61\144\x6d\x69\x6e\x2e\x72\x65\x6c\x61\164\151\x6f\156\163\150\x69\160\x73\56\155\157\144\x65\154\x5f\145\170\151\163\164\163") . implode("\x2c", $kiLYC)); goto ceN0u; jvf8P: return $this->response()->successMessage(admin_trans("\x61\x64\155\151\x6e\56\x61\x63\164\151\157\156\137\x73\165\143\143\145\163\x73")); goto L1jWo; L1jWo: } }
