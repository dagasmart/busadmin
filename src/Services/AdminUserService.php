<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-06-22 09:38:16              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace DagaSmart\BizAdmin\Services; use Illuminate\Support\Arr; use DagaSmart\BizAdmin\Admin; use Illuminate\Support\Facades\Hash; use DagaSmart\BizAdmin\Models\AdminUser; use DagaSmart\BizAdmin\Models\AdminRole; use Illuminate\Database\Eloquent\Builder; class AdminUserService extends AdminService { protected object|null $admin_user; public function __construct() { goto HQYeK; HQYeK: parent::__construct(); goto uLfB9; uLfB9: $this->admin_user = Admin::user() ?? null; goto csdLY; csdLY: $this->modelName = Admin::adminUserModel(); goto VRpfs; VRpfs: } public function getEditData($H0Ru3) { goto OCv3u; OCv3u: $Gqv1z = parent::getEditData($H0Ru3)->makeHidden("\x70\x61\x73\163\167\157\162\x64"); goto ZYlmh; Cq_3Y: return $Gqv1z; goto rg3hj; ZYlmh: $Gqv1z->load("\162\157\154\145\163"); goto Cq_3Y; rg3hj: } public function store($J6yf0) { goto DKaP2; DKaP2: $this->checkUsernameUnique($J6yf0["\x75\x73\145\x72\x6e\x61\x6d\x65"]); goto hqnMC; Q3XCy: $this->passwordHandler($J6yf0); goto tfCNJ; hqnMC: admin_abort_if(!data_get($J6yf0, "\x70\141\x73\x73\167\x6f\162\144"), admin_trans("\x61\144\155\x69\156\x2e\162\145\161\165\x69\162\x65\x64", ["\141\x74\164\162\x69\142\165\x74\x65" => admin_trans("\x61\144\x6d\x69\156\x2e\160\141\163\x73\167\x6f\x72\144")])); goto Q3XCy; tfCNJ: return $this->saveData($J6yf0); goto K1LEz; K1LEz: } public function update($Asg3e, $J6yf0) { goto F3oSa; Qs1im: $this->passwordHandler($J6yf0); goto P6hqZ; P6hqZ: return $this->saveData($J6yf0, $Asg3e); goto L7ZeF; F3oSa: $this->checkUsernameUnique($J6yf0["\x75\163\145\x72\x6e\141\155\x65"], $Asg3e); goto Qs1im; L7ZeF: } public function checkUsernameUnique($PuPjp, $H0Ru3 = 0) { $kiLYC = $this->query()->where("\165\x73\x65\162\156\141\155\x65", $PuPjp)->when($H0Ru3, fn($uzIV4) => $uzIV4->where("\x69\144", "\x3c\76", $H0Ru3))->exists(); admin_abort_if($kiLYC, admin_trans("\141\144\x6d\x69\156\x2e\141\144\155\x69\x6e\x5f\x75\163\x65\x72\56\x75\x73\x65\162\x6e\141\155\145\x5f\x61\x6c\x72\145\141\144\171\x5f\x65\170\151\x73\164\163")); } public function updateUserSetting($Asg3e, $J6yf0) : bool { $this->passwordHandler($J6yf0, $Asg3e); return parent::update($Asg3e, $J6yf0); } public function passwordHandler(&$J6yf0, $H0Ru3 = null) { goto uLEXz; QVhBj: if (!$H0Ru3) { goto mdBJm; } goto mkOmi; MV69n: $X63ra = $this->query()->where("\x69\144", $H0Ru3)->value("\160\x61\x73\x73\167\157\162\144"); goto pzeF4; oQtHn: mdBJm: goto idkEK; idkEK: $J6yf0["\x70\141\x73\163\167\x6f\162\144"] = bcrypt($D4pq9); goto W3XXl; ynAzA: admin_abort_if($D4pq9 !== Arr::get($J6yf0, "\x63\157\x6e\x66\x69\162\x6d\x5f\x70\141\x73\x73\x77\157\162\144"), admin_trans("\x61\144\155\151\156\56\x61\144\155\151\156\x5f\165\163\145\x72\56\x70\141\x73\x73\x77\157\x72\x64\137\143\157\x6e\x66\x69\162\x6d\141\x74\x69\157\156")); goto QVhBj; pzeF4: admin_abort_if(!Hash::check($J6yf0["\157\x6c\144\137\x70\141\x73\163\x77\x6f\162\144"], $X63ra), admin_trans("\x61\144\x6d\x69\156\56\141\144\155\x69\156\137\x75\x73\145\x72\56\x6f\154\x64\x5f\160\x61\x73\163\167\x6f\162\x64\137\x65\162\x72\157\x72")); goto oQtHn; W3XXl: unset($J6yf0["\x63\x6f\x6e\x66\x69\162\x6d\x5f\x70\x61\x73\x73\167\157\x72\x64"]); goto aFtw9; TeQNP: if (!$D4pq9) { goto PU0yg; } goto ynAzA; mkOmi: admin_abort_if(!Arr::get($J6yf0, "\x6f\154\x64\x5f\x70\141\x73\163\x77\157\162\x64"), admin_trans("\x61\x64\x6d\151\x6e\56\x61\x64\155\x69\x6e\x5f\165\163\145\162\x2e\157\154\144\137\x70\141\x73\163\167\157\162\x64\137\x72\145\x71\165\151\162\145\x64")); goto MV69n; uLEXz: $D4pq9 = Arr::get($J6yf0, "\160\x61\163\x73\x77\x6f\162\x64"); goto TeQNP; aFtw9: unset($J6yf0["\157\x6c\144\137\x70\141\x73\x73\x77\x6f\162\x64"]); goto A97h1; A97h1: PU0yg: goto jZGsj; jZGsj: } public function listQuery() { goto fuwGt; d0015: EM3Pq: goto Sua5n; Sua5n: if (!(Admin::currentModule(true) && !is_null(Admin::merId()))) { goto xUNkj; } goto Udi3i; Ie68U: $i4sDS = safe_explode("\54", $CCTvC); goto W9sxQ; uyLjJ: if (!($fu1uN = request()->roles)) { goto B5iT8; } goto jDYGQ; ZIKfC: if (!($PuPjp = request()->username)) { goto csi9U; } goto hfuTY; hP5cG: $uzIV4->where("\145\x6d\x61\x69\x6c", "\x6c\x69\153\145", "\45{$JlesB}\45"); goto PaOx3; PaOx3: cTxUX: goto wSnsu; PsvMN: eQrgD: goto zCcbd; C3JDG: $uzIV4->whereBetween("\143\162\145\x61\x74\x65\144\x5f\x61\x74", [$i4sDS[0] . "\x20\60\60\x3a\x30\x30\72\60\60", $i4sDS[1] . "\40\62\x33\72\x35\71\72\65\71"]); goto PsvMN; ZgEfi: if (!($yE039 = request()->name)) { goto eXD2D; } goto nWv8k; fuwGt: $uzIV4 = parent::listQuery()->with("\x72\x6f\x6c\x65\x73")->select(["\x69\144", "\x6e\x61\x6d\145", "\165\x73\x65\162\156\141\155\145", "\141\166\x61\x74\x61\162", "\x65\156\141\x62\x6c\145\x64", "\x65\155\141\151\154", "\143\162\x65\141\x74\x65\144\x5f\141\164"]); goto Hk90W; UedAL: if (!($JlesB = request()->email)) { goto cTxUX; } goto hP5cG; jDYGQ: $mhcjS = is_array($fu1uN) ? $fu1uN : [$fu1uN]; goto U2aYY; uLOKM: $uzIV4->whereHas("\x72\x6f\154\145\163", function ($uzIV4) { $uzIV4->whereIn("\151\x64", $this->admin_user->roles()->pluck("\151\x64")); }); goto d0015; xpARO: B5iT8: goto Rbfr8; Rbfr8: if (!request()->filled("\145\x6e\141\x62\x6c\x65\x64")) { goto e6NHd; } goto nWr3a; t6Dg7: eXD2D: goto uyLjJ; hfuTY: $uzIV4->where("\165\x73\x65\x72\156\141\x6d\x65", "\x6c\x69\x6b\x65", "\45{$PuPjp}\x25"); goto C1F33; wSnsu: if (!($CCTvC = request()->created_at)) { goto ptfTJ; } goto Ie68U; zCcbd: ptfTJ: goto vYSsE; Udi3i: $uzIV4->where("\155\145\x72\x5f\151\144", Admin::merId()); goto SK4ri; U2aYY: $uzIV4->whereHas("\x72\x6f\154\145\163", function ($uzIV4) use($mhcjS) { $uzIV4->whereIn("\x69\144", $mhcjS); }); goto xpARO; poVH8: e6NHd: goto UedAL; nWr3a: $uzIV4->where("\145\x6e\x61\x62\154\145\144", request()->enabled); goto poVH8; vYSsE: return $uzIV4; goto LDsFg; Hk90W: if ($this->admin_user->isAdministrator()) { goto EM3Pq; } goto uLOKM; nWv8k: $uzIV4->where("\156\141\x6d\x65", "\154\151\x6b\145", "\45{$yE039}\45"); goto t6Dg7; W9sxQ: if (!(count($i4sDS) == 2)) { goto eQrgD; } goto C3JDG; SK4ri: xUNkj: goto ZIKfC; C1F33: csi9U: goto ZgEfi; LDsFg: } protected function saveData($J6yf0, $Asg3e = null) { goto PvOBO; phDKv: $kX4rm = $this->getTableColumns(); goto AR7TB; miiq4: return true; goto y6vZD; AR7TB: $fu1uN = Arr::pull($J6yf0, "\x72\x6f\154\x65\163"); goto B1cF4; y6vZD: xib7U: goto F2YWa; EmCx_: bC12q: goto Lzgyk; PvOBO: $MWice = $Asg3e ? $this->query()->find($Asg3e) : $this->getModel(); goto phDKv; Lzgyk: if (!$MWice->save()) { goto xib7U; } goto WMnI8; B1cF4: foreach ($J6yf0 as $RpIak => $nJGKm) { goto yfqLr; RtYy8: $MWice->setAttribute($RpIak, $nJGKm); goto AkkqJ; yfqLr: if (in_array($RpIak, $kX4rm)) { goto Aciiv; } goto pWaUG; AkkqJ: dvj9p: goto gBZ5M; lqevN: Aciiv: goto RtYy8; pWaUG: goto dvj9p; goto lqevN; gBZ5M: } goto EmCx_; WMnI8: $MWice->roles()->sync(Arr::has($fu1uN, "\60\x2e\x69\x64") ? Arr::pluck($fu1uN, "\151\144") : $fu1uN); goto miiq4; F2YWa: return false; goto oabNm; oabNm: } public function delete(string $PjGLY) { goto mEi0Q; mEi0Q: $kiLYC = $this->query()->whereIn($this->primaryKey(), explode("\x2c", $PjGLY))->whereHas("\x72\x6f\154\145\163", fn($eIy1F) => $eIy1F->where("\x73\154\x75\x67", AdminRole::SuperAdministrator))->exists(); goto J3nGA; J3nGA: admin_abort_if($kiLYC, admin_trans("\141\x64\x6d\x69\156\56\141\144\155\x69\x6e\137\165\163\x65\162\x2e\143\x61\156\x6e\x6f\x74\x5f\x64\145\154\x65\164\x65")); goto JgygH; JgygH: return parent::delete($PjGLY); goto TeCtc; TeCtc: } public function roleOptions() { goto hvlYJ; d7rlM: return $uzIV4->get(["\151\144", "\x6e\141\x6d\x65"]); goto cqWyD; bQkYH: $uzIV4->whereIn("\151\x64", $this->admin_user->roles()->pluck("\151\x64")); goto Iz5Ev; Iz5Ev: n8r2e: goto d7rlM; x2Yek: if ($this->admin_user->isAdministrator()) { goto n8r2e; } goto bQkYH; hvlYJ: $uzIV4 = AdminRoleService::make()->query(); goto x2Yek; cqWyD: } }
