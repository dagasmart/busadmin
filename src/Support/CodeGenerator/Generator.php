<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-06-22 09:38:16              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace DagaSmart\BizAdmin\Support\CodeGenerator; use Illuminate\Support\Arr; use Illuminate\Support\Str; use Illuminate\Support\Facades\DB; use DagaSmart\BizAdmin\Traits\MakeTrait; use Illuminate\Support\Facades\Schema; use Illuminate\Support\Facades\Artisan; use DagaSmart\BizAdmin\Models\AdminCodeGenerator; use Symfony\Component\HttpFoundation\Response as HttpResponse; class Generator { use MakeTrait; public static array $dataTypeMap = ["\151\x6e\x74" => "\151\x6e\x74\x65\x67\x65\x72", "\151\x6e\x74\100\x75\156\163\x69\x67\156\145\x64" => "\165\156\163\151\147\156\145\144\x49\156\x74\145\x67\145\x72", "\164\151\x6e\x79\x69\156\x74" => "\164\x69\156\171\x49\156\x74\145\x67\x65\162", "\x74\x69\x6e\171\151\x6e\x74\x40\x75\156\x73\x69\x67\156\145\x64" => "\x75\156\163\x69\x67\x6e\x65\x64\124\151\156\171\111\156\x74\x65\147\x65\162", "\163\x6d\x61\154\x6c\151\156\164" => "\163\155\x61\x6c\x6c\111\156\164\145\x67\145\162", "\163\x6d\x61\154\x6c\x69\x6e\x74\100\165\x6e\x73\x69\x67\156\145\x64" => "\x75\156\x73\151\147\156\x65\144\x53\x6d\141\x6c\154\x49\x6e\164\145\x67\145\162", "\x6d\x65\x64\151\x75\155\151\156\x74" => "\x6d\x65\144\x69\x75\155\111\x6e\x74\145\147\x65\162", "\x6d\x65\x64\151\165\155\151\156\164\x40\x75\x6e\163\x69\x67\x6e\x65\144" => "\165\x6e\x73\151\x67\156\145\x64\x4d\145\x64\x69\x75\x6d\111\156\x74\145\147\x65\162", "\x62\151\147\x69\x6e\164" => "\x62\x69\x67\x49\x6e\164\145\x67\x65\x72", "\142\151\x67\x69\156\164\100\x75\x6e\x73\x69\147\156\145\144" => "\x75\x6e\163\x69\x67\156\x65\144\102\151\x67\111\x6e\164\145\x67\x65\162", "\x64\141\x74\145" => "\144\141\164\145", "\x74\151\155\145" => "\x74\x69\155\145", "\144\141\x74\145\164\x69\x6d\145" => "\x64\141\x74\x65\124\x69\x6d\x65", "\x74\151\x6d\x65\163\x74\141\155\x70" => "\164\x69\x6d\145\163\164\141\x6d\x70", "\145\x6e\165\x6d" => "\x65\x6e\165\155", "\152\163\157\x6e" => "\152\x73\x6f\156", "\142\x69\x6e\141\162\171" => "\142\x69\156\141\x72\x79", "\x66\x6c\157\141\164" => "\x66\154\x6f\141\x74", "\x64\x6f\x75\142\154\x65" => "\x64\x6f\x75\142\x6c\145", "\x64\x65\x63\151\x6d\x61\154" => "\144\145\x63\151\x6d\x61\x6c", "\x76\141\162\x63\x68\x61\x72" => "\163\164\x72\151\156\x67", "\x63\x68\141\x72" => "\143\x68\141\x72", "\x74\x65\x78\x74" => "\x74\x65\x78\x74", "\155\x65\144\x69\165\155\164\145\170\164" => "\155\x65\144\x69\165\155\x54\145\170\x74", "\154\157\156\x67\x74\x65\170\164" => "\x6c\x6f\156\x67\124\145\x78\x74", "\x69\156\x74\145\147\145\x72" => "\x69\x6e\164\145\x67\x65\x72"]; public function needCreateOptions() { return [["\154\x61\x62\x65\154" => admin_trans("\x61\x64\155\x69\x6e\56\x63\x6f\144\145\x5f\x67\x65\156\x65\162\141\164\157\162\163\56\x63\162\x65\x61\164\145\x5f\x64\x61\x74\141\x62\141\x73\145\x5f\155\x69\x67\162\141\164\151\157\x6e"), "\x76\x61\154\165\x65" => "\156\145\x65\x64\x5f\x64\x61\x74\x61\x62\x61\163\145\x5f\x6d\151\x67\x72\x61\x74\x69\157\x6e"], ["\154\x61\x62\x65\154" => admin_trans("\x61\x64\x6d\151\x6e\56\143\x6f\x64\145\x5f\147\x65\x6e\145\x72\x61\x74\x6f\162\163\x2e\x63\x72\x65\141\x74\x65\137\164\x61\142\154\145"), "\x76\x61\x6c\165\145" => "\x6e\x65\x65\x64\x5f\x63\x72\145\x61\164\145\x5f\164\x61\x62\x6c\145"], ["\x6c\141\142\x65\154" => admin_trans("\x61\144\155\151\x6e\56\x63\157\x64\145\x5f\147\x65\156\145\162\x61\x74\x6f\x72\163\x2e\x63\162\145\x61\x74\x65\x5f\x6d\x6f\144\145\x6c"), "\x76\141\154\165\x65" => "\156\x65\145\x64\x5f\155\157\x64\x65\x6c"], ["\154\141\x62\145\x6c" => admin_trans("\141\144\x6d\x69\156\56\143\x6f\x64\145\137\x67\145\156\145\162\141\164\157\162\163\x2e\x63\x72\x65\141\x74\145\x5f\143\157\x6e\x74\162\157\154\154\x65\x72"), "\166\x61\154\165\x65" => "\156\145\145\144\137\x63\x6f\x6e\164\162\x6f\x6c\x6c\145\x72"], ["\x6c\141\142\x65\154" => admin_trans("\x61\x64\155\151\x6e\x2e\x63\x6f\x64\145\137\147\145\156\145\x72\141\164\x6f\x72\163\x2e\143\162\x65\x61\x74\145\x5f\x73\145\162\x76\x69\143\x65"), "\166\141\x6c\165\x65" => "\x6e\145\145\x64\137\x73\x65\162\x76\151\x63\x65"]]; } public function availableFieldTypes() : array { return collect(self::$dataTypeMap)->values()->map(fn($IyStN) => ["\154\141\142\145\154" => $IyStN, "\166\141\154\165\x65" => $IyStN])->toArray(); } public function getDatabaseColumns($QBXHg = null, $AO5Qr = null) { goto QyOSG; QyOSG: $YhdfW = Arr::where(config("\x64\x61\x74\141\142\x61\163\x65\x2e\x63\157\156\156\145\143\164\151\x6f\x6e\163", []), function ($IyStN, $ZAY66) { return $ZAY66 == config("\x64\x61\164\141\142\x61\x73\x65\56\144\145\146\x61\165\x6c\164"); }); goto AbZvi; rDFX6: try { foreach ($YhdfW as $bHFp8 => $IyStN) { goto WfN5F; iMUEY: $TKiHg = strlen($IyStN["\144\141\x74\x61\x62\141\163\x65"]) > 28 ? substr_replace($IyStN["\144\x61\164\141\142\x61\x73\x65"], "\52\52\x2a", 10, -15) : $IyStN["\144\141\164\141\142\x61\x73\145"]; goto CpI9p; WfN5F: if (!($QBXHg && $QBXHg != $IyStN["\x64\x61\164\141\x62\141\x73\145"])) { goto LUhE7; } goto zbmNS; zbmNS: goto V2IK4; goto EtUHo; vTIje: V2IK4: goto LIFO1; EtUHo: LUhE7: goto IV9TL; CpI9p: $J6yf0[$TKiHg] = collect($Fl8WN)->flip()->map(function ($YtJjU, $FDXE6) use($x1R7S, $bHFp8) { return collect($x1R7S->getColumns($FDXE6))->whereNotIn("\156\141\x6d\145", ["\x69\x64", "\143\162\145\x61\164\x65\144\137\x61\x74", "\x75\x70\144\141\164\145\144\x5f\141\x74", "\x64\x65\x6c\x65\164\x65\144\137\141\164"])->values()->map(function ($nJGKm) { goto eok9G; yFytl: $nJGKm["\x6e\165\x6c\154\141\x62\154\x65"] = $nJGKm["\x6e\x75\x6c\x6c\x61\x62\x6c\x65"] == "\x59\105\x53"; goto IV7x0; eok9G: $nJGKm["\164\171\x70\145"] = Arr::get(Generator::$dataTypeMap, $nJGKm["\x74\x79\x70\x65"], "\163\164\x72\x69\156\x67"); goto yFytl; IV7x0: $nJGKm["\143\x6f\155\x6d\145\156\x74"] = filled($nJGKm["\143\157\x6d\155\145\156\164"]) ? $nJGKm["\143\157\x6d\x6d\x65\156\164"] : Str::studly($nJGKm["\x6e\x61\155\145"]); goto OpUvR; OpUvR: return $nJGKm; goto uBSyq; uBSyq: }); }); goto vTIje; IV9TL: try { goto xIbbH; onGxp: $NX2Ym = $IyStN["\x73\145\141\x72\143\150\137\160\x61\164\x68"] ?? $IyStN["\144\141\164\141\x62\141\x73\145"]; goto JE1Gq; xIbbH: $x1R7S = Schema::connection($bHFp8); goto onGxp; JE1Gq: $Fl8WN = collect($x1R7S->getTables($NX2Ym))->pluck("\x6e\141\x6d\x65")->map(fn($yE039) => Str::replaceStart(data_get($IyStN, "\x70\162\145\x66\x69\170", ''), '', $yE039))->toArray(); goto EqAn9; EqAn9: } catch (\Throwable $FXDMR) { goto V2IK4; } goto iMUEY; LIFO1: } wXlko: } catch (\Throwable $FXDMR) { } goto vgCUQ; vgCUQ: return collect($J6yf0); goto wdOuN; AbZvi: $J6yf0 = []; goto rDFX6; wdOuN: } public function getDatabasePrimaryKeys($QBXHg = null, $FDXE6 = null) { goto iNs0F; kPB0U: $J6yf0 = []; goto zoAEt; iNs0F: $YhdfW = Arr::where(config("\144\x61\x74\141\142\x61\x73\145\56\143\157\156\x6e\x65\143\164\x69\157\156\163", []), function ($IyStN, $ZAY66) { return $ZAY66 == config("\x64\x61\164\x61\x62\x61\163\145\56\x64\x65\146\141\165\x6c\x74"); }); goto kPB0U; zoAEt: try { foreach ($YhdfW as $bHFp8 => $IyStN) { goto MU2wi; HuXzh: if (!$FDXE6) { goto XSd0S; } goto tdIEv; upfFm: goto x0PgW; goto oSpIo; Rddd0: doy_V: goto AlO6v; yc5eq: yOpuT: goto yd88U; Kv8Fo: if ($DK70E) { goto UL2rK; } goto Gd_uN; AoYkw: $QsQC3 = collect($kX4rm)->map(function ($nJGKm) use($IyStN) { goto VvBaW; UZ9ti: $nJGKm["\x74\x61\142\154\x65\x5f\156\x61\155\145"] = Str::replaceFirst($LWUUl, '', $nJGKm["\x74\x61\142\154\x65\137\x6e\141\x6d\145"]); goto pJOis; VvBaW: if ($LWUUl = Arr::get($IyStN, "\160\162\x65\146\151\170")) { goto ADCpa; } goto cJCDU; pJBxf: $nJGKm = (array) $nJGKm; goto UZ9ti; pJOis: return $nJGKm; goto OhNyg; cJCDU: return (array) $nJGKm; goto OR6ht; OR6ht: ADCpa: goto pJBxf; OhNyg: }); goto Kv8Fo; AlO6v: $uj3DW .= sprintf("\x20\x41\x4e\104\40\164\x61\x62\x6c\x65\137\x73\143\x68\x65\155\x61\x20\x3d\40\x27\45\x73\47", $NX2Ym); goto HuXzh; iur_P: x0PgW: goto ZC15f; tdIEv: if (!($LWUUl = Arr::get($IyStN, "\x70\162\145\x66\x69\170"))) { goto yOpuT; } goto Tr0jo; yd88U: $uj3DW .= sprintf("\40\101\116\x44\40\x74\141\x62\154\x65\x5f\156\141\155\x65\x20\75\x20\x27\x25\x73\x27", $FDXE6); goto YW9jW; oSpIo: UL2rK: goto dSbhQ; kFafC: $uj3DW = sprintf("\x53\x45\114\x45\103\124\40\52\40\x46\x52\x4f\115\x20\x69\x6e\x66\x6f\162\155\141\164\x69\x6f\156\137\x73\143\x68\x65\155\x61\56\x63\x6f\x6c\165\x6d\156\x73\40\x57\x48\105\x52\x45\40\61\x3d\x31", $NX2Ym); goto nkS90; XmNXc: $uj3DW .= sprintf("\x20\101\116\x44\40\x74\141\142\x6c\x65\137\x63\x61\x74\x61\154\x6f\147\x20\75\x20\x27\x25\x73\47", $IyStN["\144\141\x74\141\142\141\x73\145"]); goto Rddd0; bgsgj: $NX2Ym = $IyStN["\163\x65\x61\162\x63\x68\x5f\160\141\164\x68"] ?? $IyStN["\x64\x61\x74\x61\x62\x61\x73\145"]; goto kFafC; nkS90: $DK70E = $IyStN["\x73\145\x61\162\x63\x68\137\160\x61\x74\x68"] ?? false; goto Qk40h; y9jfr: L85Ne: goto bgsgj; dSbhQ: $J6yf0[$IyStN["\144\x61\164\141\x62\141\163\x65"]] = $QsQC3->groupBy("\164\141\142\154\x65\x5f\156\x61\x6d\145")->map(function ($nJGKm) { return collect($nJGKm)->keyBy("\143\x6f\x6c\165\x6d\156\x5f\x6e\141\x6d\145")->filter(function ($nJGKm) { return strpos($nJGKm["\x63\157\154\165\x6d\x6e\x5f\x64\145\146\x61\x75\154\164"], "\156\145\x78\164\166\141\154") !== false; })->whereNotIn("\143\x6f\x6c\165\155\x6e\137\x6e\x61\x6d\x65", ["\143\x72\145\x61\x74\145\x64\137\x61\x74", "\165\160\x64\x61\x74\145\144\x5f\141\x74", "\144\x65\154\x65\x74\x65\x64\x5f\x61\164"])->map(fn($nJGKm) => $nJGKm["\143\157\154\165\155\x6e\137\156\x61\x6d\x65"])->values()->first(); }); goto iur_P; Er8Uo: goto YCen9; goto y9jfr; Tr0jo: $FDXE6 = $LWUUl . $FDXE6; goto yc5eq; YW9jW: XSd0S: goto NiwXJ; NiwXJ: $kX4rm = DB::connection($bHFp8)->select($uj3DW); goto AoYkw; MU2wi: if (!($QBXHg && $QBXHg != $IyStN["\x64\141\x74\141\x62\x61\x73\x65"])) { goto L85Ne; } goto Er8Uo; Qk40h: if (!$DK70E) { goto doy_V; } goto XmNXc; ZC15f: YCen9: goto VQxAY; Gd_uN: $J6yf0[$IyStN["\144\141\x74\x61\142\x61\163\145"]] = $QsQC3->groupBy("\x54\101\102\114\x45\137\116\x41\x4d\105")->map(function ($nJGKm) { return collect($nJGKm)->keyBy("\x43\117\x4c\x55\x4d\x4e\137\x4e\101\115\105")->where("\103\117\114\x55\115\x4e\x5f\x4b\105\x59", "\x50\122\111")->whereNotIn("\103\117\x4c\x55\x4d\x4e\x5f\x4e\101\x4d\105", ["\x63\162\145\141\x74\x65\144\x5f\141\164", "\165\160\144\x61\164\145\x64\137\x61\164", "\144\x65\x6c\145\x74\145\144\137\141\164"])->map(fn($nJGKm) => $nJGKm["\103\x4f\114\125\x4d\116\137\x4e\x41\x4d\105"])->values()->first(); }); goto upfFm; VQxAY: } a_5Rk: } catch (\Throwable $FXDMR) { } goto pm_eD; pm_eD: return collect($J6yf0); goto rjtR9; rjtR9: } public function generate($H0Ru3, $iSz2M = []) { goto CJJuJ; bmvsu: $hvLj1 = fn($I6sOc, $ZkOaA) => "\74\142\40\143\154\x61\163\x73\75\x27\x74\145\x78\x74\55\163\165\143\x63\x65\163\x73\47\x3e{$I6sOc}\40\147\145\156\145\162\141\x74\x65\x64\x20\163\165\x63\x63\x65\163\x73\x66\x75\x6c\x6c\x79\41\x3c\57\142\76\x3c\x62\x72\76{$ZkOaA}\x3c\142\162\x3e\74\x62\x72\x3e"; goto EmvgZ; yUls1: $MWice = AdminCodeGenerator::find($H0Ru3); goto IFqTa; IFqTa: $iSz2M = collect(filled($iSz2M) ? $iSz2M : $Q0WFS->needs); goto bmvsu; XxczR: return $x5f_0; goto XE0_N; EmvgZ: $xuPSa = []; goto xp3r4; CJJuJ: $Q0WFS = AdminCodeGenerator::find($H0Ru3); goto yUls1; dQna2: try { goto Acz6I; BUivO: $ZkOaA = ControllerGenerator::make($Q0WFS)->generate(); goto x6Vpn; WSeCK: KzkOE: goto Wy7Jr; O9c1S: goto oni3b; goto cO8O7; aXO8O: $xuPSa[] = $ZkOaA; goto YvtLA; PbUl1: $sdg8x = str_replace(base_path(), '', $ZkOaA); goto ApZMI; B_Exf: Wi9d7: goto V0j4s; hnExI: abort(HttpResponse::HTTP_BAD_REQUEST, "\x54\x61\x62\x6c\145\40\x5b{$Q0WFS->table_name}\x5d\40\141\x6c\162\145\141\x64\171\40\x65\x78\151\163\164\163\x21"); goto WSeCK; AjcRO: N3c33: goto F3o10; gbfdX: if (!Schema::hasTable($Q0WFS->table_name)) { goto KzkOE; } goto hnExI; pFhFm: if (!$iSz2M->contains("\x6e\145\x65\144\137\x64\141\x74\x61\x62\141\163\145\137\x6d\151\x67\x72\141\164\x69\x6f\156")) { goto N3c33; } goto J65yl; M0xkC: mUiNh: goto QGOb4; uInIh: if (!$iSz2M->contains("\156\145\x65\144\x5f\163\145\x72\x76\151\143\145")) { goto bSPg6; } goto CljNJ; V0j4s: if (!$iSz2M->contains("\x6e\145\145\144\137\143\157\x6e\164\x72\157\154\x6c\x65\162")) { goto q0fOz; } goto BUivO; cO8O7: lqUgp: goto SLbGE; lA73U: $x5f_0 .= $hvLj1("\x4d\x69\147\x72\141\x74\x69\157\156", $ZkOaA); goto PbUl1; SLbGE: Artisan::call("\x6d\x69\x67\162\x61\164\x65", ["\x2d\55\x70\x61\164\x68" => $sdg8x]); goto m0hqS; CK8r1: bSPg6: goto YoPZk; Acz6I: if (!$iSz2M->contains("\x6e\145\145\144\137\155\x6f\144\x65\154")) { goto Wi9d7; } goto DbvCl; CljNJ: $ZkOaA = ServiceGenerator::make($Q0WFS)->generate(); goto MHRga; YvtLA: q0fOz: goto uInIh; Wy7Jr: if ($sdg8x) { goto lqUgp; } goto Ms7Ap; ApZMI: $xuPSa[] = $ZkOaA; goto AjcRO; Nhvyv: $xuPSa[] = $ZkOaA; goto B_Exf; DbvCl: $ZkOaA = ModelGenerator::make($MWice)->generate(); goto GxbMa; x6Vpn: $x5f_0 .= $hvLj1("\x43\157\156\x74\x72\157\154\x6c\x65\162", $ZkOaA); goto aXO8O; Ms7Ap: Artisan::call("\155\151\147\162\x61\x74\x65"); goto O9c1S; J65yl: $ZkOaA = MigrationGenerator::make($Q0WFS)->generate(); goto lA73U; m0hqS: oni3b: goto q2xXt; q2xXt: $x5f_0 .= $hvLj1("\124\141\142\x6c\145", Artisan::output()); goto M0xkC; F3o10: if (!$iSz2M->contains("\156\145\145\144\x5f\143\x72\145\x61\164\145\x5f\164\141\x62\x6c\x65")) { goto mUiNh; } goto gbfdX; GxbMa: $x5f_0 .= $hvLj1("\x4d\x6f\144\145\154", $ZkOaA); goto Nhvyv; YoPZk: RouteGenerator::handle($Q0WFS->menu_info); goto cf0ot; cf0ot: $sdg8x = ''; goto pFhFm; DmS7g: $xuPSa[] = $ZkOaA; goto CK8r1; MHRga: $x5f_0 .= $hvLj1("\x53\145\x72\x76\151\x63\x65", $ZkOaA); goto DmS7g; QGOb4: } catch (\Throwable $FXDMR) { goto elVIK; elVIK: app("\x66\x69\154\145\x73")->delete($xuPSa); goto v8KJw; v8KJw: RouteGenerator::refresh(); goto o7yrY; o7yrY: admin_abort($FXDMR->getMessage()); goto aVI7R; aVI7R: } goto XxczR; xp3r4: $x5f_0 = ''; goto dQna2; XE0_N: } public function preview($H0Ru3) { goto t2rdY; ajw6Q: try { goto lagmx; tZghs: $rCPJv = ServiceGenerator::make($Q0WFS)->preview(); goto qI1vP; lagmx: $MWice = ModelGenerator::make($Q0WFS)->preview(); goto Jjg11; I1mEj: $o9Z9P = ControllerGenerator::make($Q0WFS)->preview(); goto tZghs; Jjg11: $k5Ije = MigrationGenerator::make($Q0WFS)->preview(); goto I1mEj; qI1vP: } catch (\Exception $FXDMR) { admin_abort($FXDMR->getMessage()); } goto yhWJb; t2rdY: $Q0WFS = AdminCodeGenerator::find($H0Ru3); goto ajw6Q; yhWJb: return compact("\155\157\144\x65\154", "\155\x69\x67\162\141\164\151\157\156", "\x63\x6f\156\164\162\157\154\154\x65\x72", "\163\145\x72\166\151\x63\x65"); goto CfD0m; CfD0m: } }
